!function(){"use strict";function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t(e,n,r){return(t="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,n,r||e)}function n(e){var t="function"==typeof Map?new Map:void 0;return(n=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,o)}function o(){return r(e,arguments,l(this).constructor)}return o.prototype=Object.create(e.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),i(o,e)})(e)}function r(e,t,n){return(r=c()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&i(o,n.prototype),o}).apply(null,arguments)}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=c();return function(){var n,r=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return u(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);s=!0);}catch(u){a=!0,o=u}finally{try{s||null==n.return||n.return()}finally{if(a)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(self.webpackChunknebular=self.webpackChunknebular||[]).push([[8729],{68729:function(e,t,n){n.d(t,{S:function(){return _}});var r=n(37716),o=n(38583),i=n(10494),s=n(3679),a=n(44265),u=n(32937),c=n(52313),l=n(48722),p=n(71147),g=n(60534),y=n(42687),k=n(15798),v=n(93264),w=n(84399),O=n(19822),m=n(19339),b=n(16721),T=n(9814),E=n(67846),A=n(69207),R=n(47852);function S(e,t){var n=[];return e.strategies.forEach(function(e){var r=d(e,2),o=r[0],i=r[1],s=t.get(o);s.setOptions(i),n.push(s)}),n}function P(e){var t=[];return e.forEach(function(e){t.push(e.getOption("token.class"))}),t}function N(e){return(0,R.ZB)(A.GI,e)}function C(e){return!0}var D,_=((D=function(){function e(){f(this,e)}return h(e,null,[{key:"forRoot",value:function(t){return{ngModule:e,providers:[{provide:A.sR,useValue:t},{provide:A.h,useFactory:N,deps:[A.sR]},{provide:A.ao,useFactory:S,deps:[A.h,r.zs3]},{provide:A.oB,useFactory:P,deps:[A.ao]},{provide:m.Z,useValue:v.xC},{provide:A.g5,useValue:"Authorization"},{provide:A.nN,useValue:C},{provide:w.i,useClass:w.e},m.r,k._,O.L,b.r,E.O,T.F]}}}]),e}()).\u0275fac=function(e){return new(e||D)},D.\u0275mod=r.oAB({type:D}),D.\u0275inj=r.cJS({imports:[[o.ez,a.B,u.z,c.M,l.P,p.n,g.T,i.Bz,s.u5,y.K]]}),D)},69207:function(e,t,n){n.d(t,{GI:function(){return i},h:function(){return s},sR:function(){return a},ao:function(){return u},oB:function(){return c},g5:function(){return l},nN:function(){return f}});var r=n(37716),o=[],i={strategies:[],forms:{login:{redirectDelay:500,strategy:"email",rememberMe:!0,showMessages:{success:!0,error:!0},socialLinks:o},register:{redirectDelay:500,strategy:"email",showMessages:{success:!0,error:!0},terms:!0,socialLinks:o},requestPassword:{redirectDelay:500,strategy:"email",showMessages:{success:!0,error:!0},socialLinks:o},resetPassword:{redirectDelay:500,strategy:"email",showMessages:{success:!0,error:!0},socialLinks:o},logout:{redirectDelay:500,strategy:"email"},validation:{password:{required:!0,minLength:4,maxLength:50},email:{required:!0},fullName:{required:!1,minLength:4,maxLength:50}}}},s=new r.OlP("Nebular Auth Options"),a=new r.OlP("Nebular User Auth Options"),u=new r.OlP("Nebular Auth Strategies"),c=new r.OlP("Nebular Auth Tokens"),l=new r.OlP("Nebular Simple Interceptor Header"),f=new r.OlP("Nebular Interceptor Filter")},47852:function(e,t,n){n.d(t,{ZB:function(){return r},hB:function(){return a},XE:function(){return u}});var r=function e(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(arguments.length<1||"object"!=typeof arguments[0])return!1;if(arguments.length<2)return arguments[0];var a,u,c=arguments[0],l=Array.prototype.slice.call(arguments,1);return l.forEach(function(t){"object"!=typeof t||Array.isArray(t)||Object.keys(t).forEach(function(n){if(u=c[n],(a=t[n])!==c)return"object"!=typeof a||null===a?void(c[n]=a):Array.isArray(a)?void(c[n]=s(a)):o(a)?void(c[n]=i(a)):"object"!=typeof u||null===u||Array.isArray(u)?void(c[n]=e({},a)):void(c[n]=e(u,a))})}),c};function o(e){return e instanceof Date||e instanceof RegExp}function i(e){if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return new RegExp(e);throw new Error("cloneSpecificValue: Unexpected situation")}function s(e){var t=[];return e.forEach(function(e,n){t[n]="object"==typeof e&&null!==e?Array.isArray(e)?s(e):o(e)?i(e):r({},e):e}),t}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,o=t.split("."),i=r({},e||{});return o.forEach(function(e){i=i&&void 0!==i[e]?i[e]:void 0}),void 0===i?n:i}function u(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("Illegal base64url string!")}return function(e){return decodeURIComponent(Array.prototype.map.call(function(e){var t="";if((e=String(e).replace(/=+$/,"")).length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,o=0,i=0;r=e.charAt(i++);~r&&(n=o%4?64*n+r:r,o++%4)?t+=String.fromCharCode(255&n>>(-2*o&6)):0)r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r);return t}(e),function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join(""))}(t)}},42305:function(e,t,n){n.d(t,{g:function(){return r}});var r=function(){function e(t,n,r,o,i){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;f(this,e),this.success=t,this.response=n,this.redirect=r,this.errors=[],this.messages=[],this.errors=this.errors.concat([o]),o instanceof Array&&(this.errors=o),this.messages=this.messages.concat([i]),i instanceof Array&&(this.messages=i),this.token=s}return h(e,[{key:"getResponse",value:function(){return this.response}},{key:"getToken",value:function(){return this.token}},{key:"getRedirect",value:function(){return this.redirect}},{key:"getErrors",value:function(){return this.errors.filter(function(e){return!!e})}},{key:"getMessages",value:function(){return this.messages.filter(function(e){return!!e})}},{key:"isSuccess",value:function(){return this.success}},{key:"isFailure",value:function(){return!this.success}}]),e}()},15798:function(e,t,n){n.d(t,{_:function(){return l}});var r,o=n(25917),i=n(88002),s=n(43190),a=n(69207),u=n(37716),c=n(19822),l=((r=function(){function e(t,n){f(this,e),this.tokenService=t,this.strategies=n}return h(e,[{key:"getToken",value:function(){return this.tokenService.get()}},{key:"isAuthenticated",value:function(){return this.getToken().pipe((0,i.U)(function(e){return e.isValid()}))}},{key:"isAuthenticatedOrRefresh",value:function(){var e=this;return this.getToken().pipe((0,s.w)(function(t){return t.getValue()&&!t.isValid()?e.refreshToken(t.getOwnerStrategyName(),t).pipe((0,s.w)(function(t){return t.isSuccess()?e.isAuthenticated():(0,o.of)(!1)})):(0,o.of)(t.isValid())}))}},{key:"onTokenChange",value:function(){return this.tokenService.tokenChange()}},{key:"onAuthenticationChange",value:function(){return this.onTokenChange().pipe((0,i.U)(function(e){return e.isValid()}))}},{key:"authenticate",value:function(e,t){var n=this;return this.getStrategy(e).authenticate(t).pipe((0,s.w)(function(e){return n.processResultToken(e)}))}},{key:"register",value:function(e,t){var n=this;return this.getStrategy(e).register(t).pipe((0,s.w)(function(e){return n.processResultToken(e)}))}},{key:"logout",value:function(e){var t=this;return this.getStrategy(e).logout().pipe((0,s.w)(function(e){return e.isSuccess()&&t.tokenService.clear().pipe((0,i.U)(function(){return e})),(0,o.of)(e)}))}},{key:"requestPassword",value:function(e,t){return this.getStrategy(e).requestPassword(t)}},{key:"resetPassword",value:function(e,t){return this.getStrategy(e).resetPassword(t)}},{key:"refreshToken",value:function(e,t){var n=this;return this.getStrategy(e).refreshToken(t).pipe((0,s.w)(function(e){return n.processResultToken(e)}))}},{key:"getStrategy",value:function(e){var t=this.strategies.find(function(t){return t.getName()===e});if(!t)throw new TypeError("There is no Auth Strategy registered under '".concat(e,"' name"));return t}},{key:"processResultToken",value:function(e){return e.isSuccess()&&e.getToken()?this.tokenService.set(e.getToken()).pipe((0,i.U)(function(t){return e})):(0,o.of)(e)}}]),e}()).\u0275fac=function(e){return new(e||r)(u.LFG(c.L),u.LFG(a.ao))},r.\u0275prov=u.Yz7({token:r,factory:r.\u0275fac}),r)},19339:function(e,t,n){n.d(t,{Z:function(){return a},r:function(){return u}});var r,o=n(37716),i=n(93264),s=n(69207),a=new o.OlP("Nebular Auth Options"),u=((r=function(){function e(t,n){f(this,e),this.fallbackClass=t,this.tokenClasses=n}return h(e,[{key:"wrap",value:function(e){return JSON.stringify({name:e.getName(),ownerStrategyName:e.getOwnerStrategyName(),createdAt:e.getCreatedAt().getTime(),value:e.toString()})}},{key:"unwrap",value:function(e){var t=this.fallbackClass,n="",r="",o=null,s=this.parseTokenPack(e);return s&&(t=this.getClassByName(s.name)||this.fallbackClass,n=s.value,r=s.ownerStrategyName,o=new Date(Number(s.createdAt))),(0,i.P_)(t,n,r,o)}},{key:"getClassByName",value:function(e){return this.tokenClasses.find(function(t){return t.NAME===e})}},{key:"parseTokenPack",value:function(e){try{return JSON.parse(e)}catch(t){}return null}}]),e}()).\u0275fac=function(e){return new(e||r)(o.LFG(a),o.LFG(s.oB))},r.\u0275prov=o.Yz7({token:r,factory:r.\u0275fac}),r)},84399:function(e,t,n){n.d(t,{i:function(){return u},e:function(){return c}});var r,i=n(37716),a=n(19339),u=function e(){f(this,e)},c=((r=function(e){o(n,e);var t=s(n);function n(e){var r;return f(this,n),(r=t.call(this)).parceler=e,r.key="auth_app_token",r}return h(n,[{key:"get",value:function(){var e=localStorage.getItem(this.key);return this.parceler.unwrap(e)}},{key:"set",value:function(e){var t=this.parceler.wrap(e);localStorage.setItem(this.key,t)}},{key:"clear",value:function(){localStorage.removeItem(this.key)}}]),n}(u)).\u0275fac=function(e){return new(e||r)(i.LFG(a.r))},r.\u0275prov=i.Yz7({token:r,factory:r.\u0275fac}),r)},19822:function(e,t,n){n.d(t,{L:function(){return l}});var r,o=n(26215),i=n(25917),s=n(45435),a=n(78345),u=n(37716),c=n(84399),l=((r=function(){function e(t){f(this,e),this.tokenStorage=t,this.token$=new o.X(null),this.publishStoredToken()}return h(e,[{key:"tokenChange",value:function(){return this.token$.pipe((0,s.h)(function(e){return!!e}),(0,a.B)())}},{key:"set",value:function(e){return this.tokenStorage.set(e),this.publishStoredToken(),(0,i.of)(null)}},{key:"get",value:function(){var e=this.tokenStorage.get();return(0,i.of)(e)}},{key:"clear",value:function(){return this.tokenStorage.clear(),this.publishStoredToken(),(0,i.of)(null)}},{key:"publishStoredToken",value:function(){this.token$.next(this.tokenStorage.get())}}]),e}()).\u0275fac=function(e){return new(e||r)(u.LFG(c.i))},r.\u0275prov=u.Yz7({token:r,factory:r.\u0275fac}),r)},93264:function(e,r,i){i.d(r,{ww:function(){return p},P_:function(){return y},xC:function(){return w},OS:function(){return O},FN:function(){return m},Xq:function(){return b}});var a=i(47852),c=function(e){o(n,e);var t=s(n);function n(e){var r;return f(this,n),r=t.call(this,e),Object.setPrototypeOf(u(r),(this instanceof n?this.constructor:void 0).prototype),r}return n}(n(Error)),p=function(e){o(n,e);var t=s(n);function n(e){var r;return f(this,n),r=t.call(this,e),Object.setPrototypeOf(u(r),(this instanceof n?this.constructor:void 0).prototype),r}return n}(n(Error)),d=function(e){o(n,e);var t=s(n);function n(e){var r;return f(this,n),r=t.call(this,e),Object.setPrototypeOf(u(r),(this instanceof n?this.constructor:void 0).prototype),r}return n}(p),g=function(e){o(n,e);var t=s(n);function n(e){var r;return f(this,n),r=t.call(this,e),Object.setPrototypeOf(u(r),(this instanceof n?this.constructor:void 0).prototype),r}return n}(p);function y(e,t,n,r){return new e(t,n,r)}function k(e){if(0===e.length)throw new d("Cannot extract from an empty payload.");var t,n=e.split(".");if(3!==n.length)throw new g("The payload ".concat(e," is not valid JWT payload and must consist of three parts."));try{t=(0,a.XE)(n[1])}catch(r){throw new g("The payload ".concat(e," is not valid JWT payload and cannot be parsed."))}if(!t)throw new g("The payload ".concat(e," is not valid JWT payload and cannot be decoded."));return JSON.parse(t)}var v,w=((v=function(e){o(n,e);var t=s(n);function n(e,r,o){var i;f(this,n),(i=t.call(this)).token=e,i.ownerStrategyName=r,i.createdAt=o;try{i.parsePayload()}catch(s){if(!(s instanceof c))throw s}return i.createdAt=i.prepareCreatedAt(o),i}return h(n,[{key:"parsePayload",value:function(){this.payload=null}},{key:"prepareCreatedAt",value:function(e){return e||new Date}},{key:"getCreatedAt",value:function(){return this.createdAt}},{key:"getValue",value:function(){return this.token}},{key:"getOwnerStrategyName",value:function(){return this.ownerStrategyName}},{key:"isValid",value:function(){return!!this.getValue()}},{key:"toString",value:function(){return this.token?this.token:""}}]),n}(function(){function e(){f(this,e),this.payload=null}return h(e,[{key:"getName",value:function(){return this.constructor.NAME}},{key:"getPayload",value:function(){return this.payload}}]),e}())).NAME="nb:auth:simple:token",v),O=function(){var e=function(e){o(r,e);var n=s(r);function r(){return f(this,r),n.apply(this,arguments)}return h(r,[{key:"prepareCreatedAt",value:function(e){var n=this.getPayload();return n&&n.iat?new Date(1e3*Number(n.iat)):t(l(r.prototype),"prepareCreatedAt",this).call(this,e)}},{key:"parsePayload",value:function(){if(!this.token)throw new c("Token not found. ");this.payload=k(this.token)}},{key:"getTokenExpDate",value:function(){var e=this.getPayload();if(e&&!e.hasOwnProperty("exp"))return null;var t=new Date(0);return t.setUTCSeconds(e.exp),t}},{key:"isValid",value:function(){return t(l(r.prototype),"isValid",this).call(this)&&(!this.getTokenExpDate()||new Date<this.getTokenExpDate())}}]),r}(w);return e.NAME="nb:auth:jwt:token",e}(),m=function(){var e=function(e){o(r,e);var n=s(r);function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0;return f(this,r),n.call(this,function(e){if("string"==typeof e)try{return JSON.parse(e)}catch(t){}return e}(e),t,o)}return h(r,[{key:"getValue",value:function(){return this.token.access_token}},{key:"getRefreshToken",value:function(){return this.token.refresh_token}},{key:"setRefreshToken",value:function(e){this.token.refresh_token=e}},{key:"parsePayload",value:function(){if(!this.token)throw new c("Token not found.");if(!Object.keys(this.token).length)throw new d("Cannot extract payload from an empty token.");this.payload=this.token}},{key:"getType",value:function(){return this.token.token_type}},{key:"isValid",value:function(){return t(l(r.prototype),"isValid",this).call(this)&&(!this.getTokenExpDate()||new Date<this.getTokenExpDate())}},{key:"getTokenExpDate",value:function(){return this.token.hasOwnProperty("expires_in")?new Date(this.createdAt.getTime()+1e3*Number(this.token.expires_in)):null}},{key:"toString",value:function(){return JSON.stringify(this.token)}}]),r}(w);return e.NAME="nb:auth:oauth2:token",e}(),b=function(){var e=function(e){o(r,e);var n=s(r);function r(){return f(this,r),n.apply(this,arguments)}return h(r,[{key:"parsePayload",value:function(){t(l(r.prototype),"parsePayload",this).call(this),this.parseAccessTokenPayload()}},{key:"parseAccessTokenPayload",value:function(){var e=this.getValue();if(!e)throw new c("access_token key not found.");this.accessTokenPayload=k(e)}},{key:"getAccessTokenPayload",value:function(){return this.accessTokenPayload}},{key:"prepareCreatedAt",value:function(e){var n=this.accessTokenPayload;return n&&n.iat?new Date(1e3*Number(n.iat)):t(l(r.prototype),"prepareCreatedAt",this).call(this,e)}},{key:"isValid",value:function(){return this.accessTokenPayload&&t(l(r.prototype),"isValid",this).call(this)}},{key:"getTokenExpDate",value:function(){if(this.accessTokenPayload&&this.accessTokenPayload.hasOwnProperty("exp")){var e=new Date(0);return e.setUTCSeconds(this.accessTokenPayload.exp),e}return t(l(r.prototype),"getTokenExpDate",this).call(this)}}]),r}(m);return e.NAME="nb:auth:oauth2:jwt:token",e}()},41854:function(e,t,n){n.d(t,{Y:function(){return r}});var r=function e(){f(this,e)}},95607:function(e,t,n){n.d(t,{D:function(){return s}});var r=n(91841),o=n(47852),i=n(93264),s=function(){function e(){f(this,e)}return h(e,[{key:"setOptions",value:function(e){this.options=(0,o.ZB)({},this.defaultOptions,e)}},{key:"getOption",value:function(e){return(0,o.hB)(this.options,e,null)}},{key:"createToken",value:function(e,t){var n=(0,i.P_)(this.getOption("token.class"),e,this.getName());if(t&&!n.isValid())throw new i.ww("Token is empty or invalid.");return n}},{key:"getName",value:function(){return this.getOption("name")}},{key:"createFailResponse",value:function(e){return new r.Zn({body:{},status:401})}},{key:"createSuccessResponse",value:function(e){return new r.Zn({body:{},status:200})}},{key:"getActionEndpoint",value:function(e){var t=this.getOption("".concat(e,".endpoint")),n=this.getOption("baseEndpoint");return t?n+t:""}}]),e}()},16721:function(e,t,n){n.d(t,{r:function(){return k}});var r,i,a=n(25917),u=n(71289),c=n(95607),l=n(42305),p=n(41854),d=n(93264),g=new(function(e){o(n,e);var t=s(n);function n(){var e;return f(this,n),(e=t.apply(this,arguments)).token={class:d.xC},e.delay=1e3,e.alwaysFail=!1,e}return n}(p.Y)),y=n(37716),k=((i=function(e){o(n,e);var t=s(n);function n(){var e;return f(this,n),(e=t.apply(this,arguments)).defaultOptions=g,e}return h(n,[{key:"authenticate",value:function(e){return(0,a.of)(this.createDummyResult(e)).pipe((0,u.g)(this.getOption("delay")))}},{key:"register",value:function(e){return(0,a.of)(this.createDummyResult(e)).pipe((0,u.g)(this.getOption("delay")))}},{key:"requestPassword",value:function(e){return(0,a.of)(this.createDummyResult(e)).pipe((0,u.g)(this.getOption("delay")))}},{key:"resetPassword",value:function(e){return(0,a.of)(this.createDummyResult(e)).pipe((0,u.g)(this.getOption("delay")))}},{key:"logout",value:function(e){return(0,a.of)(this.createDummyResult(e)).pipe((0,u.g)(this.getOption("delay")))}},{key:"refreshToken",value:function(e){return(0,a.of)(this.createDummyResult(e)).pipe((0,u.g)(this.getOption("delay")))}},{key:"createDummyResult",value:function(e){if(this.getOption("alwaysFail"))return new l.g(!1,this.createFailResponse(e),null,["Something went wrong."]);try{var t=this.createToken("test token",!0);return new l.g(!0,this.createSuccessResponse(e),"/",[],["Successfully logged in."],t)}catch(t){return new l.g(!1,this.createFailResponse(e),null,[t.message])}}}],[{key:"setup",value:function(e){return[n,e]}}]),n}(c.D)).\u0275fac=function(e){return(r||(r=y.n5z(i)))(e||i)},i.\u0275prov=y.Yz7({token:i,factory:i.\u0275fac}),i)},97501:function(e,t,n){n.d(t,{aW:function(){return u},sY:function(){return c},rW:function(){return l},N2:function(){return p}});var r,i=n(93264),a=n(41854),u=((r=u||(u={})).CODE="code",r.TOKEN="token",u),c=function(){return(e=c||(c={})).AUTHORIZATION_CODE="authorization_code",e.PASSWORD="password",e.REFRESH_TOKEN="refresh_token",c;var e}(),l=function(){return(e=l||(l={})).NONE="none",e.BASIC="basic",e.REQUEST_BODY="request-body",l;var e}(),p=new(function(e){o(n,e);var t=s(n);function n(){var e;return f(this,n),(e=t.apply(this,arguments)).baseEndpoint="",e.clientId="",e.clientSecret="",e.clientAuthMethod=l.NONE,e.redirect={success:"/",failure:null},e.defaultErrors=["Something went wrong, please try again."],e.defaultMessages=["You have been successfully authenticated."],e.authorize={endpoint:"authorize",responseType:u.CODE,requireValidToken:!0},e.token={endpoint:"token",grantType:c.AUTHORIZATION_CODE,requireValidToken:!0,class:i.FN},e.refresh={endpoint:"token",grantType:c.REFRESH_TOKEN,requireValidToken:!0},e}return n}(a.Y))},9814:function(t,n,r){r.d(n,{F:function(){return b}});var i,a=r(91841),u=r(25917),c=r(43190),l=r(88002),p=r(5304),g=r(56722),y=r(95607),k=r(93264),v=r(42305),w=r(97501),O=r(37716),m=r(10494),b=((i=function(t){o(r,t);var n=s(r);function r(t,o,i){var s,a,h;return f(this,r),(h=n.call(this)).http=t,h.route=o,h.window=i,h.redirectResultHandlers=(e(s={},w.aW.CODE,function(){return(0,u.of)(h.route.snapshot.queryParams).pipe((0,c.w)(function(e){return e.code?h.requestToken(e.code):(0,u.of)(new v.g(!1,e,h.getOption("redirect.failure"),h.getOption("defaultErrors"),[]))}))}),e(s,w.aW.TOKEN,function(){var e=h.getOption("authorize.requireValidToken");return(0,u.of)(h.route.snapshot.fragment).pipe((0,l.U)(function(e){return h.parseHashAsQueryParams(e)}),(0,l.U)(function(t){return t.error?new v.g(!1,t,h.getOption("redirect.failure"),h.getOption("defaultErrors"),[]):new v.g(!0,t,h.getOption("redirect.success"),[],h.getOption("defaultMessages"),h.createToken(t,e))}),(0,p.K)(function(e){var t=[];return t.push(e instanceof k.ww?e.message:"Something went wrong."),(0,u.of)(new v.g(!1,e,h.getOption("redirect.failure"),t))}))}),s),h.redirectResults=(e(a={},w.aW.CODE,function(){return(0,u.of)(h.route.snapshot.queryParams).pipe((0,l.U)(function(e){return!(!e||!e.code&&!e.error)}))}),e(a,w.aW.TOKEN,function(){return(0,u.of)(h.route.snapshot.fragment).pipe((0,l.U)(function(e){return h.parseHashAsQueryParams(e)}),(0,l.U)(function(e){return!(!e||!e.access_token&&!e.error)}))}),a),h.defaultOptions=w.N2,h}return h(r,[{key:"responseType",get:function(){return this.getOption("authorize.responseType")}},{key:"clientAuthMethod",get:function(){return this.getOption("clientAuthMethod")}},{key:"authenticate",value:function(e){var t=this;return this.getOption("token.grantType")===w.sY.PASSWORD?this.passwordToken(e.email,e.password):this.isRedirectResult().pipe((0,c.w)(function(e){return e?t.getAuthorizationResult():(t.authorizeRedirect(),(0,u.of)(new v.g(!0)))}))}},{key:"getAuthorizationResult",value:function(){var e=this.redirectResultHandlers[this.responseType];if(e)return e.call(this);throw new Error("'".concat(this.responseType,"' responseType is not supported,\n                      only 'token' and 'code' are supported now"))}},{key:"refreshToken",value:function(e){var t=this,n="refresh",r=this.getActionEndpoint(n),o=this.getOption("".concat(n,".requireValidToken")),i=this.buildAuthHeader()||new a.WM;return i=i.append("Content-Type","application/x-www-form-urlencoded"),this.http.post(r,this.buildRefreshRequestData(e),{headers:i}).pipe((0,l.U)(function(n){return new v.g(!0,n,t.getOption("redirect.success"),[],t.getOption("defaultMessages"),t.createRefreshedToken(n,e,o))}),(0,p.K)(function(e){return t.handleResponseError(e)}))}},{key:"passwordToken",value:function(e,t){var n=this,r="token",o=this.getActionEndpoint(r),i=this.getOption("".concat(r,".requireValidToken")),s=this.buildAuthHeader()||new a.WM;return s=s.append("Content-Type","application/x-www-form-urlencoded"),this.http.post(o,this.buildPasswordRequestData(e,t),{headers:s}).pipe((0,l.U)(function(e){return new v.g(!0,e,n.getOption("redirect.success"),[],n.getOption("defaultMessages"),n.createToken(e,i))}),(0,p.K)(function(e){return n.handleResponseError(e)}))}},{key:"authorizeRedirect",value:function(){this.window.location.href=this.buildRedirectUrl()}},{key:"isRedirectResult",value:function(){return this.redirectResults[this.responseType].call(this)}},{key:"requestToken",value:function(e){var t=this,n="token",r=this.getActionEndpoint(n),o=this.getOption("".concat(n,".requireValidToken")),i=this.buildAuthHeader()||new a.WM;return i=i.append("Content-Type","application/x-www-form-urlencoded"),this.http.post(r,this.buildCodeRequestData(e),{headers:i}).pipe((0,l.U)(function(e){return new v.g(!0,e,t.getOption("redirect.success"),[],t.getOption("defaultMessages"),t.createToken(e,o))}),(0,p.K)(function(e){return t.handleResponseError(e)}))}},{key:"buildCodeRequestData",value:function(e){var t={grant_type:this.getOption("token.grantType"),code:e,redirect_uri:this.getOption("token.redirectUri"),client_id:this.getOption("clientId")};return this.urlEncodeParameters(this.cleanParams(this.addCredentialsToParams(t)))}},{key:"buildRefreshRequestData",value:function(e){var t={grant_type:this.getOption("refresh.grantType"),refresh_token:e.getRefreshToken(),scope:this.getOption("refresh.scope"),client_id:this.getOption("clientId")};return this.urlEncodeParameters(this.cleanParams(this.addCredentialsToParams(t)))}},{key:"buildPasswordRequestData",value:function(e,t){var n={grant_type:this.getOption("token.grantType"),username:e,password:t,scope:this.getOption("token.scope")};return this.urlEncodeParameters(this.cleanParams(this.addCredentialsToParams(n)))}},{key:"buildAuthHeader",value:function(){if(this.clientAuthMethod===w.rW.BASIC){if(this.getOption("clientId")&&this.getOption("clientSecret"))return new a.WM({Authorization:"Basic "+btoa(this.getOption("clientId")+":"+this.getOption("clientSecret"))});throw Error("For basic client authentication method, please provide both clientId & clientSecret.")}}},{key:"cleanParams",value:function(e){return Object.entries(e).forEach(function(t){var n=d(t,2),r=n[0];return!n[1]&&delete e[r]}),e}},{key:"addCredentialsToParams",value:function(e){if(this.clientAuthMethod===w.rW.REQUEST_BODY){if(this.getOption("clientId")&&this.getOption("clientSecret"))return Object.assign(Object.assign({},e),{client_id:this.getOption("clientId"),client_secret:this.getOption("clientSecret")});throw Error("For request body client authentication method, please provide both clientId & clientSecret.")}return e}},{key:"handleResponseError",value:function(e){var t=[];return e instanceof a.UA?e.error.error_description?t.push(e.error.error_description):t=this.getOption("defaultErrors"):t.push(e instanceof k.ww?e.message:"Something went wrong."),(0,u.of)(new v.g(!1,e,this.getOption("redirect.failure"),t,[]))}},{key:"buildRedirectUrl",value:function(){var e=Object.assign({response_type:this.getOption("authorize.responseType"),client_id:this.getOption("clientId"),redirect_uri:this.getOption("authorize.redirectUri"),scope:this.getOption("authorize.scope"),state:this.getOption("authorize.state")},this.getOption("authorize.params"));return"".concat(this.getActionEndpoint("authorize"),"?").concat(this.urlEncodeParameters(this.cleanParams(e)))}},{key:"parseHashAsQueryParams",value:function(e){return e?e.split("&").reduce(function(e,t){var n=t.split("=");return e[n[0]]=decodeURIComponent(n[1]),e},{}):{}}},{key:"urlEncodeParameters",value:function(e){return Object.keys(e).map(function(t){return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e[t]))}).join("&")}},{key:"createRefreshedToken",value:function(e,t,n){var r=this.createToken(e,n);return!r.getRefreshToken()&&t.getRefreshToken()&&r.setRefreshToken(t.getRefreshToken()),r}},{key:"register",value:function(e){throw new Error("`register` is not supported by `NbOAuth2AuthStrategy`, use `authenticate`.")}},{key:"requestPassword",value:function(e){throw new Error("`requestPassword` is not supported by `NbOAuth2AuthStrategy`, use `authenticate`.")}},{key:"resetPassword",value:function(){throw new Error("`resetPassword` is not supported by `NbOAuth2AuthStrategy`, use `authenticate`.")}},{key:"logout",value:function(){return(0,u.of)(new v.g(!0))}}],[{key:"setup",value:function(e){return[r,e]}}]),r}(y.D)).\u0275fac=function(e){return new(e||i)(O.LFG(a.eN),O.LFG(m.gz),O.LFG(g.Q3))},i.\u0275prov=O.Yz7({token:i,factory:i.\u0275fac}),i)},67846:function(e,t,n){n.d(t,{O:function(){return m}});var r,i=n(91841),a=n(25917),u=n(88002),c=n(5304),l=n(43190),p=n(42305),d=n(95607),g=n(93264),y=n(41854),k=n(47852),v=new(function(e){o(n,e);var t=s(n);function n(){var e;return f(this,n),(e=t.apply(this,arguments)).baseEndpoint="/api/auth/",e.login={alwaysFail:!1,endpoint:"login",method:"post",requireValidToken:!0,redirect:{success:"/",failure:null},defaultErrors:["Login/Email combination is not correct, please try again."],defaultMessages:["You have been successfully logged in."]},e.register={alwaysFail:!1,endpoint:"register",method:"post",requireValidToken:!0,redirect:{success:"/",failure:null},defaultErrors:["Something went wrong, please try again."],defaultMessages:["You have been successfully registered."]},e.requestPass={endpoint:"request-pass",method:"post",redirect:{success:"/",failure:null},defaultErrors:["Something went wrong, please try again."],defaultMessages:["Reset password instructions have been sent to your email."]},e.resetPass={endpoint:"reset-pass",method:"put",redirect:{success:"/",failure:null},resetPasswordTokenKey:"reset_password_token",defaultErrors:["Something went wrong, please try again."],defaultMessages:["Your password has been successfully changed."]},e.logout={alwaysFail:!1,endpoint:"logout",method:"delete",redirect:{success:"/",failure:null},defaultErrors:["Something went wrong, please try again."],defaultMessages:["You have been successfully logged out."]},e.refreshToken={endpoint:"refresh-token",method:"post",requireValidToken:!0,redirect:{success:null,failure:null},defaultErrors:["Something went wrong, please try again."],defaultMessages:["Your token has been successfully refreshed."]},e.token={class:g.xC,key:"data.token",getter:function(e,t,n){return(0,k.hB)(t.body,n.token.key)}},e.errors={key:"data.errors",getter:function(e,t,n){return(0,k.hB)(t.error,n.errors.key,n[e].defaultErrors)}},e.messages={key:"data.messages",getter:function(e,t,n){return(0,k.hB)(t.body,n.messages.key,n[e].defaultMessages)}},e}return n}(y.Y)),w=n(37716),O=n(10494),m=((r=function(e){o(n,e);var t=s(n);function n(e,r){var o;return f(this,n),(o=t.call(this)).http=e,o.route=r,o.defaultOptions=v,o}return h(n,[{key:"authenticate",value:function(e){var t=this,n="login",r=this.getOption("".concat(n,".method")),o=this.getActionEndpoint(n),i=this.getOption("".concat(n,".requireValidToken"));return this.http.request(r,o,{body:e,observe:"response"}).pipe((0,u.U)(function(r){if(t.getOption("".concat(n,".alwaysFail")))throw t.createFailResponse(e);return r}),(0,u.U)(function(e){return new p.g(!0,e,t.getOption("".concat(n,".redirect.success")),[],t.getOption("messages.getter")(n,e,t.options),t.createToken(t.getOption("token.getter")(n,e,t.options),i))}),(0,c.K)(function(e){return t.handleResponseError(e,n)}))}},{key:"register",value:function(e){var t=this,n="register",r=this.getOption("".concat(n,".method")),o=this.getActionEndpoint(n),i=this.getOption("".concat(n,".requireValidToken"));return this.http.request(r,o,{body:e,observe:"response"}).pipe((0,u.U)(function(r){if(t.getOption("".concat(n,".alwaysFail")))throw t.createFailResponse(e);return r}),(0,u.U)(function(e){return new p.g(!0,e,t.getOption("".concat(n,".redirect.success")),[],t.getOption("messages.getter")(n,e,t.options),t.createToken(t.getOption("token.getter")("login",e,t.options),i))}),(0,c.K)(function(e){return t.handleResponseError(e,n)}))}},{key:"requestPassword",value:function(e){var t=this,n="requestPass",r=this.getOption("".concat(n,".method")),o=this.getActionEndpoint(n);return this.http.request(r,o,{body:e,observe:"response"}).pipe((0,u.U)(function(e){if(t.getOption("".concat(n,".alwaysFail")))throw t.createFailResponse();return e}),(0,u.U)(function(e){return new p.g(!0,e,t.getOption("".concat(n,".redirect.success")),[],t.getOption("messages.getter")(n,e,t.options))}),(0,c.K)(function(e){return t.handleResponseError(e,n)}))}},{key:"resetPassword",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n="resetPass",r=this.getOption("".concat(n,".method")),o=this.getActionEndpoint(n),i=this.getOption("".concat(n,".resetPasswordTokenKey"));return t[i]=this.route.snapshot.queryParams[i],this.http.request(r,o,{body:t,observe:"response"}).pipe((0,u.U)(function(t){if(e.getOption("".concat(n,".alwaysFail")))throw e.createFailResponse();return t}),(0,u.U)(function(t){return new p.g(!0,t,e.getOption("".concat(n,".redirect.success")),[],e.getOption("messages.getter")(n,t,e.options))}),(0,c.K)(function(t){return e.handleResponseError(t,n)}))}},{key:"logout",value:function(){var e=this,t="logout",n=this.getOption("".concat(t,".method")),r=this.getActionEndpoint(t);return(0,a.of)({}).pipe((0,l.w)(function(t){return r?e.http.request(n,r,{observe:"response"}):(0,a.of)(t)}),(0,u.U)(function(n){if(e.getOption("".concat(t,".alwaysFail")))throw e.createFailResponse();return n}),(0,u.U)(function(n){return new p.g(!0,n,e.getOption("".concat(t,".redirect.success")),[],e.getOption("messages.getter")(t,n,e.options))}),(0,c.K)(function(n){return e.handleResponseError(n,t)}))}},{key:"refreshToken",value:function(e){var t=this,n="refreshToken",r=this.getOption("".concat(n,".method")),o=this.getActionEndpoint(n),i=this.getOption("".concat(n,".requireValidToken"));return this.http.request(r,o,{body:e,observe:"response"}).pipe((0,u.U)(function(r){if(t.getOption("".concat(n,".alwaysFail")))throw t.createFailResponse(e);return r}),(0,u.U)(function(e){return new p.g(!0,e,t.getOption("".concat(n,".redirect.success")),[],t.getOption("messages.getter")(n,e,t.options),t.createToken(t.getOption("token.getter")(n,e,t.options),i))}),(0,c.K)(function(e){return t.handleResponseError(e,n)}))}},{key:"handleResponseError",value:function(e,t){var n=[];return e instanceof i.UA?n=this.getOption("errors.getter")(t,e,this.options):n.push(e instanceof g.ww?e.message:"Something went wrong."),(0,a.of)(new p.g(!1,e,this.getOption("".concat(t,".redirect.failure")),n))}}],[{key:"setup",value:function(e){return[n,e]}}]),n}(d.D)).\u0275fac=function(e){return new(e||r)(w.LFG(i.eN),w.LFG(O.gz))},r.\u0275prov=w.Yz7({token:r,factory:r.\u0275fac}),r)},48722:function(e,t,n){n.d(t,{P:function(){return s}});var r,o=n(65131),i=n(37716),s=((r=function e(){f(this,e)}).\u0275fac=function(e){return new(e||r)},r.\u0275mod=i.oAB({type:r}),r.\u0275inj=i.cJS({imports:[[o.P]]}),r)}}])}();