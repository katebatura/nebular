"use strict";(self.webpackChunknebular=self.webpackChunknebular||[]).push([[5162],{65162:function(t,e,n){n.r(e),n.d(e,{WindowModule:function(){return ut}});var i=n(38583),o=n(96136),s=n(32937),c=n(42687),r=n(60534),l=n(37716),a=n(45435),u=n(97805),d=(()=>{return(t=d||(d={})).MINIMIZED="minimized",t.MAXIMIZED="maximized",t.FULL_SCREEN="full-screen",d;var t})();const h={minimize:!0,maximize:!0,fullScreen:!0};class p{constructor(...t){this.title="",this.titleTemplateContext={},this.initialState=d.FULL_SCREEN,this.hasBackdrop=!0,this.closeOnBackdropClick=!0,this.closeOnEsc=!0,this.windowClass="",this.context={},this.viewContainerRef=null,this.buttons={},Object.assign(this,...t),this.applyDefaultButtonConfig()}applyDefaultButtonConfig(){Object.assign(this,{buttons:Object.assign(Object.assign({},h),this.buttons)})}}const f=new l.OlP("Nebular Window Content"),m=new l.OlP("Nebular Window Config"),w=new l.OlP("Nebular Window Context");var g=n(88229),b=n(79765);class C{constructor(t){this.config=t,this.stateChange$=new g.t(1),this._closed=!1,this.closed$=new b.xQ,this.state=t.initialState}get state(){return this.stateValue}set state(t){t&&this.stateValue!==t&&(this.prevStateValue=this.state,this.stateValue=t,this.stateChange$.next({oldState:this.prevStateValue,newState:t}))}get stateChange(){return this.stateChange$.asObservable()}get onClose(){return this.closed$.asObservable()}minimize(){this.state=d.MINIMIZED}maximize(){this.state=d.MAXIMIZED}fullScreen(){this.state=d.FULL_SCREEN}toPreviousState(){this.state=this.prevStateValue}close(){this._closed||(this._closed=!0,this.componentRef.destroy(),this.componentInstance=null,this.stateChange$.complete(),this.closed$.next(),this.closed$.complete())}}const x=["viewContainerRef"];let v=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=l.Xpm({type:t,selectors:[["nb-windows-container"]],viewQuery:function(t,e){if(1&t&&l.Gf(x,7,l.s_b),2&t){let t;l.iGM(t=l.CRH())&&(e.viewContainerRef=t.first)}},decls:2,vars:0,consts:[["viewContainerRef",""]],template:function(t,e){1&t&&l.GkF(0,null,0)},styles:["[_nghost-%COMP%]{display:flex;align-items:flex-end;overflow-x:auto}[_nghost-%COMP%]     nb-window:not(.full-screen){margin:0 2rem}"]}),t})();var y=n(16784),k=n(9787),O=n(74743),T=n(37819),M=n(72037);function Z(t,e){1&t&&l.GkF(0)}const _=function(t){return{$implicit:t}};function R(t,e){if(1&t&&(l.TgZ(0,"div",6),l.YNc(1,Z,1,0,"ng-container",7),l.qZA()),2&t){const t=l.oxw();l.xp6(1),l.Q6J("ngTemplateOutlet",t.config.titleTemplate)("ngTemplateOutletContext",l.VKq(2,_,t.config.titleTemplateContext))}}function S(t,e){if(1&t&&(l.TgZ(0,"div",8),l._uU(1),l.qZA()),2&t){const t=l.oxw();l.xp6(1),l.Oqu(t.config.title)}}function z(t,e){if(1&t){const t=l.EpF();l.ynx(0),l.TgZ(1,"button",4),l.NdJ("click",function(){return l.CHM(t),l.oxw().minimize()}),l._UZ(2,"nb-icon",9),l.qZA(),l.BQk()}}function P(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"button",4),l.NdJ("click",function(){return l.CHM(t),l.oxw(2).maximize()}),l._UZ(1,"nb-icon",11),l.qZA()}}function A(t,e){if(1&t&&(l.ynx(0),l.YNc(1,P,2,0,"button",10),l.BQk()),2&t){const t=l.oxw();l.xp6(1),l.Q6J("ngIf",t.isFullScreen)}}function W(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"button",4),l.NdJ("click",function(){return l.CHM(t),l.oxw(2).maximizeOrFullScreen()}),l._UZ(1,"nb-icon",12),l.qZA()}}function I(t,e){if(1&t&&(l.ynx(0),l.YNc(1,W,2,0,"button",10),l.BQk()),2&t){const t=l.oxw();l.xp6(1),l.Q6J("ngIf",t.minimized||t.maximized)}}function E(t,e){1&t&&(l.TgZ(0,"nb-card-body"),l._UZ(1,"nb-overlay-container"),l.qZA())}let N=(()=>{class t{constructor(t,e,n,i,o,s,c){this.content=t,this.context=e,this.windowRef=n,this.config=i,this.focusTrapFactory=o,this.elementRef=s,this.renderer=c}get isFullScreen(){return this.windowRef.state===d.FULL_SCREEN}get maximized(){return this.windowRef.state===d.MAXIMIZED}get minimized(){return this.windowRef.state===d.MINIMIZED}get showMinimize(){return this.config.buttons.minimize}get showMaximize(){return this.config.buttons.maximize}get showFullScreen(){return this.config.buttons.fullScreen}ngOnInit(){this.focusTrap=this.focusTrapFactory.create(this.elementRef.nativeElement),this.focusTrap.blurPreviouslyFocusedElement(),this.focusTrap.focusInitialElement(),this.config.windowClass&&this.renderer.addClass(this.elementRef.nativeElement,this.config.windowClass)}ngAfterViewChecked(){!this.overlayContainer||this.overlayContainer.isAttached||(this.content instanceof l.Rgc?this.attachTemplate():this.attachComponent())}ngOnDestroy(){this.focusTrap&&this.focusTrap.restoreFocus(),this.close()}minimize(){this.windowRef.state===d.MINIMIZED?this.windowRef.toPreviousState():this.windowRef.minimize()}maximize(){this.windowRef.maximize()}fullScreen(){this.windowRef.fullScreen()}maximizeOrFullScreen(){this.windowRef.state===d.MINIMIZED&&this.showMaximize?this.maximize():this.fullScreen()}close(){this.windowRef.close()}attachTemplate(){this.overlayContainer.attachTemplatePortal(new u.U2(this.content,null,this.context))}attachComponent(){const t=new u.Qi(this.content,null,null,this.cfr),e=this.overlayContainer.attachComponentPortal(t,this.context);this.windowRef.componentInstance=e.instance,e.changeDetectorRef.detectChanges()}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(f),l.Y36(w),l.Y36(C),l.Y36(p),l.Y36(k.E),l.Y36(l.SBq),l.Y36(l.Qsj))},t.\u0275cmp=l.Xpm({type:t,selectors:[["nb-window"]],viewQuery:function(t,e){if(1&t&&l.Gf(y.C,5),2&t){let t;l.iGM(t=l.CRH())&&(e.overlayContainer=t.first)}},hostVars:6,hostBindings:function(t,e){2&t&&l.ekj("full-screen",e.isFullScreen)("maximized",e.maximized)("minimized",e.minimized)},inputs:{cfr:"cfr"},decls:12,vars:6,consts:[["cdkFocusInitial","","tabindex","-1",4,"ngIf","ngIfElse"],["textTitleTemplate",""],[1,"buttons"],[4,"ngIf"],["nbButton","","ghost","",3,"click"],["icon","close-outline","pack","nebular-essentials"],["cdkFocusInitial","","tabindex","-1"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["cdkFocusInitial","","tabindex","-1",1,"title"],["icon","minus-outline","pack","nebular-essentials"],["nbButton","","ghost","",3,"click",4,"ngIf"],["icon","collapse-outline","pack","nebular-essentials"],["icon","expand-outline","pack","nebular-essentials"]],template:function(t,e){if(1&t&&(l.TgZ(0,"nb-card"),l.TgZ(1,"nb-card-header"),l.YNc(2,R,2,4,"div",0),l.YNc(3,S,2,1,"ng-template",null,1,l.W1O),l.TgZ(5,"div",2),l.YNc(6,z,3,0,"ng-container",3),l.YNc(7,A,2,1,"ng-container",3),l.YNc(8,I,2,1,"ng-container",3),l.TgZ(9,"button",4),l.NdJ("click",function(){return e.close()}),l._UZ(10,"nb-icon",5),l.qZA(),l.qZA(),l.qZA(),l.YNc(11,E,2,0,"nb-card-body",3),l.qZA()),2&t){const t=l.MAs(4);l.xp6(2),l.Q6J("ngIf",e.config.titleTemplate)("ngIfElse",t),l.xp6(4),l.Q6J("ngIf",e.showMinimize),l.xp6(1),l.Q6J("ngIf",e.showMaximize),l.xp6(1),l.Q6J("ngIf",e.showFullScreen),l.xp6(3),l.Q6J("ngIf",e.maximized||e.isFullScreen)}},directives:[O.As,O.nd,i.O5,T.D,M.f,i.tP,O.yK,y.C],styles:["[_nghost-%COMP%]{flex:1 0 auto;min-width:20rem}[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{margin:0}[_nghost-%COMP%]   nb-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;overflow:hidden}[_nghost-%COMP%]   .title[_ngcontent-%COMP%]{flex:1 0 auto;margin-right:3rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}[_nghost-%COMP%]   .buttons[_ngcontent-%COMP%]{width:9.5rem;display:flex;justify-content:flex-end}[_nghost-%COMP%]   .buttons[_ngcontent-%COMP%]   [nbButton][_ngcontent-%COMP%]{flex:0 0 3rem}.full-screen[_nghost-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%)}.maximized[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{border-bottom-left-radius:0;border-bottom-right-radius:0}.minimized[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{border-bottom-left-radius:0;border-bottom-right-radius:0;height:auto}.minimized[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]   nb-card-header[_ngcontent-%COMP%]{border-bottom:none}"]}),t})();var F=n(56722),B=n(65603),U=n(35027);let q=(()=>{class t{constructor(t,e,n,i,o,s,c){this.componentFactoryResolver=t,this.overlayService=e,this.overlayPositionBuilder=n,this.blockScrollStrategy=i,this.defaultWindowsConfig=o,this.cfr=s,this.openWindows=[],this.document=c}open(t,e={}){this.shouldCreateWindowsContainer()&&this.createWindowsContainer();const n=new p(this.defaultWindowsConfig,e),i=new C(n);return i.componentRef=this.appendWindow(t,n,i),this.openWindows.push(i),this.subscribeToEvents(i),i}shouldCreateWindowsContainer(){return!this.windowsContainerViewRef||!this.document.body.contains(this.windowsContainerViewRef.element.nativeElement)}createWindowsContainer(){this.overlayRef&&this.overlayRef.dispose(),this.overlayRef=this.overlayService.create({scrollStrategy:this.overlayService.scrollStrategies.noop(),positionStrategy:this.overlayPositionBuilder.global().bottom().right(),hasBackdrop:!0});const t=new u.Qi(v,null,null,this.cfr),e=this.overlayRef.attach(t);this.windowsContainerViewRef=e.instance.viewContainerRef}appendWindow(t,e,n){const i=l.zs3.create({parent:e.viewContainerRef?e.viewContainerRef.injector:this.windowsContainerViewRef.injector,providers:[{provide:f,useValue:t},{provide:w,useValue:t instanceof l.Rgc?{$implicit:e.context,windowRef:n}:e.context},{provide:p,useValue:e},{provide:C,useValue:n}]}),o=this.componentFactoryResolver.resolveComponentFactory(N),s=this.windowsContainerViewRef.createComponent(o,null,i);return s.instance.cfr=this.cfr,s.changeDetectorRef.detectChanges(),s}subscribeToEvents(t){t.config.closeOnBackdropClick&&this.overlayRef.backdropClick().subscribe(()=>t.close()),t.config.closeOnEsc&&this.overlayRef.keydownEvents().pipe((0,a.h)(t=>27===t.keyCode)).subscribe(()=>t.close()),t.stateChange.subscribe(()=>this.checkAndUpdateOverlay()),t.onClose.subscribe(()=>{this.openWindows.splice(this.openWindows.indexOf(t),1),this.checkAndUpdateOverlay()})}checkAndUpdateOverlay(){const t=this.openWindows.filter(t=>t.state===d.FULL_SCREEN);t.length>0?this.blockScrollStrategy.enable():this.blockScrollStrategy.disable(),t.some(t=>t.config.hasBackdrop)?this.overlayRef.backdropElement.removeAttribute("hidden"):this.overlayRef.backdropElement.setAttribute("hidden","")}}return t.\u0275fac=function(e){return new(e||t)(l.LFG(l._Vd),l.LFG(B.Pn),l.LFG(u.yV),l.LFG(U.h),l.LFG(m),l.LFG(l._Vd),l.LFG(F.qT))},t.\u0275prov=l.Yz7({token:t,factory:t.\u0275fac}),t})(),Y=(()=>{class t{static forRoot(e){return{ngModule:t,providers:[q,{provide:m,useValue:e}]}}static forChild(e){return{ngModule:t,providers:[q,{provide:m,useValue:e}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[i.ez,o.j,s.z,c.K,r.T]]}),t})();var J=n(71147),G=n(52313),Q=n(10494);const V=["contentTemplate"];function D(t,e){if(1&t&&(l.TgZ(0,"p"),l._uU(1),l.qZA()),2&t){const t=e.$implicit;l.xp6(1),l.hij('Here is the text provided via config: "',t.text,'"')}}let j=(()=>{class t{constructor(t){this.windowService=t}openWindow(){this.windowService.open(this.contentTemplate,{title:"Window content from template",context:{text:"some text to pass into template"}})}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(q))},t.\u0275cmp=l.Xpm({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){if(1&t&&l.Gf(V,5),2&t){let t;l.iGM(t=l.CRH())&&(e.contentTemplate=t.first)}},decls:4,vars:0,consts:[["nbButton","",3,"click"],["contentTemplate",""]],template:function(t,e){1&t&&(l.TgZ(0,"button",0),l.NdJ("click",function(){return e.openWindow()}),l._uU(1,"Open window"),l.qZA(),l.YNc(2,D,2,1,"ng-template",null,1,l.W1O))},directives:[T.D],styles:["nb-layout-column{height:400px}  .form{display:flex;flex-direction:column}  .form .text-label{margin-top:1.5rem}button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{margin-left:2rem}"]}),t})();var L=n(12282);let H=(()=>{class t{constructor(t){this.windowRef=t}close(){this.windowRef.close()}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(C))},t.\u0275cmp=l.Xpm({type:t,selectors:[["ng-component"]],decls:7,vars:0,consts:[[1,"form"],["for","subject"],["nbInput","","id","subject","type","text"],["for","text",1,"text-label"],["nbInput","","id","text"]],template:function(t,e){1&t&&(l.TgZ(0,"form",0),l.TgZ(1,"label",1),l._uU(2,"Subject:"),l.qZA(),l._UZ(3,"input",2),l.TgZ(4,"label",3),l._uU(5,"Text:"),l.qZA(),l._UZ(6,"textarea",4),l.qZA())},directives:[L.h],encapsulation:2}),t})(),$=(()=>{class t{constructor(t){this.windowService=t}openWindow(){this.windowService.open(H,{title:"Window"})}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(q))},t.\u0275cmp=l.Xpm({type:t,selectors:[["ng-component"]],decls:2,vars:0,consts:[["nbButton","",3,"click"]],template:function(t,e){1&t&&(l.TgZ(0,"button",0),l.NdJ("click",function(){return e.openWindow()}),l._uU(1,"Open window"),l.qZA())},directives:[T.D],styles:["nb-layout-column{height:400px}  .form{display:flex;flex-direction:column}  .form .text-label{margin-top:1.5rem}button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{margin-left:2rem}"]}),t})();const X=["escClose"],K=["disabledEsc"];function tt(t,e){1&t&&l._uU(0," Disabled close on escape click. ")}function et(t,e){1&t&&l._uU(0," Click escape to close. ")}let nt=(()=>{class t{constructor(t){this.windowService=t}openWindowWithBackdrop(){this.windowService.open(this.escCloseTemplate,{title:"Window with backdrop",hasBackdrop:!0})}openWindowWithoutBackdrop(){this.windowService.open(this.disabledEscTemplate,{title:"Window without backdrop",hasBackdrop:!1,closeOnEsc:!1})}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(q))},t.\u0275cmp=l.Xpm({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){if(1&t&&(l.Gf(X,5,l.Rgc),l.Gf(K,5,l.Rgc)),2&t){let t;l.iGM(t=l.CRH())&&(e.escCloseTemplate=t.first),l.iGM(t=l.CRH())&&(e.disabledEscTemplate=t.first)}},decls:8,vars:0,consts:[["nbButton","",3,"click"],["disabledEsc",""],["escClose",""]],template:function(t,e){1&t&&(l.TgZ(0,"button",0),l.NdJ("click",function(){return e.openWindowWithBackdrop()}),l._uU(1,"Open window with backdrop"),l.qZA(),l.TgZ(2,"button",0),l.NdJ("click",function(){return e.openWindowWithoutBackdrop()}),l._uU(3,"Open window without backdrop"),l.qZA(),l.YNc(4,tt,1,0,"ng-template",null,1,l.W1O),l.YNc(6,et,1,0,"ng-template",null,2,l.W1O))},directives:[T.D],styles:["nb-layout-column{height:400px}  .form{display:flex;flex-direction:column}  .form .text-label{margin-top:1.5rem}button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{margin-left:2rem}"]}),t})();var it=n(59683);const ot=["titleTemplate"],st=["contentTemplate"];function ct(t,e){if(1&t&&(l.TgZ(0,"p"),l._uU(1),l.qZA()),2&t){const t=e.$implicit;l.xp6(1),l.hij('Here is the text provided via config: "',t.text,'"')}}function rt(t,e){1&t&&(l.TgZ(0,"p"),l._uU(1,"Content"),l.qZA())}const lt=[{path:"template-window.component",component:j},{path:"window-showcase.component",component:$},{path:"windows-backdrop.component",component:nt},{path:"window-controls.component",component:(()=>{class t{constructor(t){this.windowService=t,this.minimize=!0,this.maximize=!0,this.fullScreen=!0}openWindow(){this.windowService.open(H,{title:"Window",buttons:{minimize:this.minimize,maximize:this.maximize,fullScreen:this.fullScreen}})}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(q))},t.\u0275cmp=l.Xpm({type:t,selectors:[["ng-component"]],decls:12,vars:3,consts:[[1,"subtitle","config-title"],[3,"checked","checkedChange"],["nbButton","",1,"open-window",3,"click"]],template:function(t,e){1&t&&(l.TgZ(0,"nb-card"),l.TgZ(1,"nb-card-body"),l.TgZ(2,"p",0),l._uU(3,"Buttons config:"),l.qZA(),l.TgZ(4,"nb-checkbox",1),l.NdJ("checkedChange",function(t){return e.minimize=t}),l._uU(5,"Minimize"),l.qZA(),l.TgZ(6,"nb-checkbox",1),l.NdJ("checkedChange",function(t){return e.maximize=t}),l._uU(7,"Maximize"),l.qZA(),l.TgZ(8,"nb-checkbox",1),l.NdJ("checkedChange",function(t){return e.fullScreen=t}),l._uU(9,"Full Screen"),l.qZA(),l.TgZ(10,"button",2),l.NdJ("click",function(){return e.openWindow()}),l._uU(11,"Open window"),l.qZA(),l.qZA(),l.qZA()),2&t&&(l.xp6(4),l.Q6J("checked",e.minimize),l.xp6(2),l.Q6J("checked",e.maximize),l.xp6(2),l.Q6J("checked",e.fullScreen))},directives:[O.As,O.yK,it.N,T.D],styles:["nb-layout-column{height:400px}  .form{display:flex;flex-direction:column}  .form .text-label{margin-top:1.5rem}button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{margin-left:2rem}",".config-title[_ngcontent-%COMP%]{margin-top:0;margin-bottom:.25rem}nb-checkbox[_ngcontent-%COMP%]{display:block}.open-window[_ngcontent-%COMP%]{margin-top:1rem}"],changeDetection:0}),t})()},{path:"window-template-title.component",component:(()=>{class t{constructor(t){this.windowService=t}openWindow(){this.windowService.open(this.contentTemplate,{titleTemplate:this.titleTemplate,titleTemplateContext:{text:"some text to pass into template"}})}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(q))},t.\u0275cmp=l.Xpm({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){if(1&t&&(l.Gf(ot,5),l.Gf(st,5)),2&t){let t;l.iGM(t=l.CRH())&&(e.titleTemplate=t.first),l.iGM(t=l.CRH())&&(e.contentTemplate=t.first)}},decls:6,vars:0,consts:[["nbButton","",3,"click"],["titleTemplate",""],["contentTemplate",""]],template:function(t,e){1&t&&(l.TgZ(0,"button",0),l.NdJ("click",function(){return e.openWindow()}),l._uU(1,"Open window"),l.qZA(),l.YNc(2,ct,2,1,"ng-template",null,1,l.W1O),l.YNc(4,rt,2,0,"ng-template",null,2,l.W1O))},directives:[T.D],encapsulation:2}),t})()}];let at=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[Q.Bz.forChild(lt)],Q.Bz]}),t})(),ut=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[Y.forRoot(),r.T,J.n,G.M,s.z,at]]}),t})()}}]);