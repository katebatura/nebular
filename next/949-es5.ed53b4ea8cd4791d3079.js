!function(){"use strict";function t(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function i(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=a(t);if(e){var o=a(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}(self.webpackChunknebular=self.webpackChunknebular||[]).push([[949],{90949:function(n,u,c){c.r(u),c.d(u,{AzurePlaygroundModule:function(){return E}});var a,s=c(38583),f=c(3679),l=c(91841),p=c(32937),h=c(44265),d=c(68729),b=c(25917),y=c(43190),g=c(88002),v=c(5304),k=c(93264),m=c(9814),w=c(97501),O=c(42305),A=c(37716),_=((a=function(t){o(u,t);var n=i(u);function u(){return e(this,u),n.apply(this,arguments)}return r(u,[{key:"getValue",value:function(){return this.token.id_token}}]),u}(k.Xq)).NAME="nb:auth:azure:token",a),Z=function(){var n,u=function(n){o(c,n);var u=i(c);function c(){var n,r,o;return e(this,c),(o=u.apply(this,arguments)).redirectResultHandlers=(t(n={},w.aW.CODE,function(){return(0,b.of)(o.route.snapshot.queryParams).pipe((0,y.w)(function(t){return t.code?o.requestToken(t.code):(0,b.of)(new O.g(!1,t,o.getOption("redirect.failure"),o.getOption("defaultErrors"),[]))}))}),t(n,"id_token",function(){var t=o.getOption("authorize.requireValidToken");return(0,b.of)(o.route.snapshot.fragment).pipe((0,g.U)(function(t){return o.parseHashAsQueryParams(t)}),(0,g.U)(function(e){return e.error?new O.g(!1,e,o.getOption("redirect.failure"),o.getOption("defaultErrors"),[]):new O.g(!0,e,o.getOption("redirect.success"),[],o.getOption("defaultMessages"),o.createToken(e,t))}),(0,v.K)(function(t){var e=[];return e.push(t instanceof k.ww?t.message:"Something went wrong."),(0,b.of)(new O.g(!1,t,o.getOption("redirect.failure"),e))}))}),n),o.redirectResults=(t(r={},w.aW.CODE,function(){return(0,b.of)(null)}),t(r,"id_token",function(){return(0,b.of)(o.route.snapshot.fragment).pipe((0,g.U)(function(t){return o.parseHashAsQueryParams(t)}),(0,g.U)(function(t){return!(!t||!t.id_token&&!t.error)}))}),r),o}return r(c,null,[{key:"setup",value:function(t){return[c,t]}}]),c}(m.F);return u.\u0275fac=function(t){return(n||(n=A.n5z(u)))(t||u)},u.\u0275prov=A.Yz7({token:u,factory:u.\u0275fac}),u}(),z=c(10494),T=c(46782),q=c(79765),R=c(15798),S=c(40646),j=function(){var t=function(){function t(n,r){var o=this;e(this,t),this.authService=n,this.router=r,this.destroy$=new q.xQ,this.authService.authenticate("azure").pipe((0,T.R)(this.destroy$)).subscribe(function(t){t.isSuccess()&&t.getRedirect()&&o.router.navigateByUrl(t.getRedirect())})}return r(t,[{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(A.Y36(R._),A.Y36(z.F0))},t.\u0275cmp=A.Xpm({type:t,selectors:[["nb-playground-azure-callback"]],decls:3,vars:0,template:function(t,e){1&t&&(A.TgZ(0,"nb-layout"),A.TgZ(1,"nb-layout-column"),A._uU(2,"Authenticating..."),A.qZA(),A.qZA())},directives:[S.Aq,S.dP],encapsulation:2}),t}(),x=c(74743);function P(t,e){if(1&t){var n=A.EpF();A.TgZ(0,"button",2),A.NdJ("click",function(){return A.CHM(n),A.oxw().login()}),A._uU(1,"Sign In with Azure"),A.qZA()}}function U(t,e){if(1&t){var n=A.EpF();A.TgZ(0,"button",3),A.NdJ("click",function(){return A.CHM(n),A.oxw().logout()}),A._uU(1,"Sign Out"),A.qZA()}}var B=[{path:"",component:function(){var t=function(){function t(n){var r=this;e(this,t),this.authService=n,this.destroy$=new q.xQ,this.authService.onTokenChange().pipe((0,T.R)(this.destroy$)).subscribe(function(t){r.token=null,t&&t.isValid()&&(r.token=t)})}return r(t,[{key:"login",value:function(){this.authService.authenticate("azure").pipe((0,T.R)(this.destroy$)).subscribe(function(t){})}},{key:"logout",value:function(){this.authService.logout("azure").pipe((0,T.R)(this.destroy$)).subscribe(function(t){})}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(A.Y36(R._))},t.\u0275cmp=A.Xpm({type:t,selectors:[["nb-playground-azure"]],decls:11,vars:6,consts:[["nbButton","","status","success",3,"click",4,"ngIf"],["nbButton","","status","warning",3,"click",4,"ngIf"],["nbButton","","status","success",3,"click"],["nbButton","","status","warning",3,"click"]],template:function(t,e){1&t&&(A.TgZ(0,"nb-layout"),A.TgZ(1,"nb-layout-column"),A.TgZ(2,"nb-card"),A.TgZ(3,"nb-card-body"),A.TgZ(4,"p"),A._uU(5),A.qZA(),A.TgZ(6,"p"),A._uU(7),A.ALo(8,"json"),A.qZA(),A.YNc(9,P,2,0,"button",0),A.YNc(10,U,2,0,"button",1),A.qZA(),A.qZA(),A.qZA(),A.qZA()),2&t&&(A.xp6(5),A.hij("Current User Authenticated: ",!!e.token,""),A.xp6(2),A.hij("Current User Token: ",A.lcZ(8,4,e.token),""),A.xp6(2),A.Q6J("ngIf",!e.token),A.xp6(1),A.Q6J("ngIf",e.token))},directives:[S.Aq,S.dP,x.As,x.yK,s.O5],pipes:[s.Ts],encapsulation:2}),t}()},{path:"callback",component:j}],C=function(){var t=function t(){e(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=A.oAB({type:t}),t.\u0275inj=A.cJS({imports:[[z.Bz.forChild(B)],z.Bz]}),t}(),E=function(){var t=function t(){e(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=A.oAB({type:t}),t.\u0275inj=A.cJS({providers:[Z],imports:[[s.ez,f.u5,l.JF,d.S.forRoot({strategies:[Z.setup({name:"azure",clientId:"bde728e2-2809-4ff1-bc9c-7fcb23800ebe",clientSecret:"",authorize:{endpoint:"https://login.microsoftonline.com/01513fd2-16a0-453b-9fa0-c9089bfa023e/oauth2/authorize",responseType:"id_token",scope:"openid",redirectUri:"https://akveo.github.io/nebular/example/azure/callback",params:{p:"b2c_1_nebular"}},token:{class:_},redirect:{success:"/example/azure"}})]}),p.z,h.B,C]]}),t}()}}])}();