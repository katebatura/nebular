"use strict";(self.webpackChunknebular=self.webpackChunknebular||[]).push([[2660],{52660:function(t,e,s){s.r(e),s.d(e,{InfiniteListModule:function(){return W}});var n=s(38583),i=s(10643),o=s(32937),r=s(80090),l=s(10494),a=s(37716),c=s(58071),h=s(15257),p=s(42145),d=s(548),g=s(95242),u=s(34022);function m(t,e,s){return 0===s?[e]:(t.push(e),t)}var b=s(56722),f=s(59190),w=s(88002),P=s(71289),Z=s(91841);let x=(()=>{class t{constructor(t){this.http=t}load(t,e){const s=(t-1)%7*e;return this.http.get("assets/data/news.json").pipe((0,w.U)(t=>t.splice(s,e)),(0,P.g)(1500))}}return t.\u0275fac=function(e){return new(e||t)(a.LFG(Z.eN))},t.\u0275prov=a.Yz7({token:t,factory:t.\u0275fac}),t})();var S=s(94775),v=s(62829),T=s(74743),y=s(77233),N=s(3656);let _=(()=>{class t{constructor(){this.label="Loading"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Xpm({type:t,selectors:[["nb-news-post-placeholder"]],hostVars:1,hostBindings:function(t,e){2&t&&a.uIk("aria-label",e.label)},decls:3,vars:0,consts:[[1,"title-placeholder"],[1,"text-placeholder"],[1,"link-placeholder"]],template:function(t,e){1&t&&(a._UZ(0,"div",0),a._UZ(1,"div",1),a._UZ(2,"div",2))},styles:["[_nghost-%COMP%]{display:block;width:100%}.title-placeholder[_ngcontent-%COMP%]{height:1.8rem;margin-bottom:.5rem;width:80%}.text-placeholder[_ngcontent-%COMP%]{height:4rem;margin-bottom:1rem}.link-placeholder[_ngcontent-%COMP%]{height:1.25rem;width:5rem}.nb-theme-default   [_nghost-%COMP%]   [class$=placeholder][_ngcontent-%COMP%]{background:#e4e9f2}.nb-theme-dark   [_nghost-%COMP%]   [class$=placeholder][_ngcontent-%COMP%]{background:#101426}.nb-theme-cosmic   [_nghost-%COMP%]   [class$=placeholder][_ngcontent-%COMP%]{background:#13132b}.nb-theme-corporate   [_nghost-%COMP%]   [class$=placeholder][_ngcontent-%COMP%]{background:#e4e9f2}"]}),t})(),q=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Xpm({type:t,selectors:[["nb-news-post"]],inputs:{post:"post"},decls:7,vars:3,consts:[[1,"h5"]],template:function(t,e){1&t&&(a.TgZ(0,"article"),a.TgZ(1,"h2",0),a._uU(2),a.qZA(),a.TgZ(3,"p"),a._uU(4),a.qZA(),a.TgZ(5,"a"),a._uU(6,"Read full article"),a.qZA(),a.qZA()),2&t&&(a.xp6(2),a.Oqu(e.post.title),a.xp6(2),a.Oqu(e.post.text),a.xp6(1),a.uIk("href",e.post.link,a.LSH))},encapsulation:2}),t})();function O(t,e){1&t&&(a.TgZ(0,"nb-list-item"),a._UZ(1,"nb-news-post-placeholder"),a.qZA())}function C(t,e){if(1&t&&(a.TgZ(0,"nb-list-item"),a._UZ(1,"nb-news-post",2),a.qZA()),2&t){const t=e.$implicit;a.xp6(1),a.Q6J("post",t)}}function A(t,e){1&t&&(a.TgZ(0,"nb-list-item"),a._UZ(1,"nb-news-post-placeholder"),a.qZA())}let z=(()=>{class t{constructor(t,e,s,i,o,r,l){this.newsService=t,this.router=e,this.route=s,this.scrollService=i,this.layoutService=o,this.platformId=r,this.window=l,this.news=[],this.topPlaceholders=[],this.bottomPlaceholders=[],this.pageSize=10,this.loadingNext=!1,this.loadingPrevious=!1,(0,n.NF)(this.platformId)&&this.window.history.scrollRestoration&&(this.initialScrollRestoration=l.history.scrollRestoration,history.scrollRestoration="manual")}ngOnInit(){const{page:t}=this.route.snapshot.queryParams;this.startPage=t?Number.parseInt(t,10):100,this.pageToLoadNext=this.startPage}ngOnDestroy(){this.initialScrollRestoration&&(this.window.history.scrollRestoration=this.initialScrollRestoration)}updateUrl(t){this.router.navigate(["."],{queryParams:{page:t},replaceUrl:!0,relativeTo:this.route,queryParamsHandling:"merge"})}loadPrevious(){this.loadingPrevious||1===this.startPage||(this.loadingPrevious=!0,this.topPlaceholders=new Array(this.pageSize),this.restoreScrollPosition(),this.startPage--,this.newsService.load(this.startPage,this.pageSize).subscribe(t=>{this.topPlaceholders=[],this.news.unshift(...t),this.loadingPrevious=!1},t=>this.startPage++))}loadNext(){this.loadingNext||(this.loadingNext=!0,this.bottomPlaceholders=new Array(this.pageSize),this.newsService.load(this.pageToLoadNext,this.pageSize).subscribe(t=>{this.bottomPlaceholders=[],this.news.push(...t),this.loadingNext=!1,this.pageToLoadNext++}))}restoreScrollPosition(){(0,c.z)(this.layoutService.getDimensions(),this.scrollService.getPosition(),this.listItems.changes.pipe((0,h.q)(1)),this.layoutService.getDimensions(),this.scrollService.getPosition()).pipe(function(t,e){return arguments.length>=2?function(s){return(0,u.z)((0,p.R)(t,e),(0,d.h)(1),(0,g.d)(e))(s)}:function(e){return(0,u.z)((0,p.R)((e,s,n)=>t(e,s,n+1)),(0,d.h)(1))(e)}}(m,[])).subscribe(([t,e,,s,n])=>{const i=n.y,o=s.scrollHeight-t.scrollHeight;e.y+o!==i&&this.scrollService.scrollTo(null,i+o)})}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(x),a.Y36(l.F0),a.Y36(l.gz),a.Y36(S.H),a.Y36(v.m),a.Y36(a.Lbi),a.Y36(b.Q3))},t.\u0275cmp=a.Xpm({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){if(1&t&&a.Gf(f.q,5,a.SBq),2&t){let t;a.iGM(t=a.CRH())&&(e.listItems=t)}},features:[a._Bn([x])],decls:5,vars:6,consts:[["nbInfiniteList","","listenWindowScroll","","nbListPageTracker","",3,"threshold","pageSize","startPage","topThreshold","bottomThreshold","pageChange"],[4,"ngFor","ngForOf"],[3,"post"]],template:function(t,e){1&t&&(a.TgZ(0,"nb-card"),a.TgZ(1,"nb-list",0),a.NdJ("topThreshold",function(){return e.loadPrevious()})("bottomThreshold",function(){return e.loadNext()})("pageChange",function(t){return e.updateUrl(t)}),a.YNc(2,O,2,0,"nb-list-item",1),a.YNc(3,C,2,1,"nb-list-item",1),a.YNc(4,A,2,0,"nb-list-item",1),a.qZA(),a.qZA()),2&t&&(a.xp6(1),a.Q6J("threshold",500)("pageSize",e.pageSize)("startPage",e.startPage),a.xp6(1),a.Q6J("ngForOf",e.topPlaceholders),a.xp6(1),a.Q6J("ngForOf",e.news),a.xp6(1),a.Q6J("ngForOf",e.bottomPlaceholders))},directives:[T.As,f.z,y.s,N.B,n.sg,f.q,_,q],styles:["body{height:30rem}[_nghost-%COMP%]{display:block;margin:0 auto;max-width:50rem}.nb-spinner-container[_ngcontent-%COMP%]{flex:1 0 4rem}"]}),t})();function J(t,e){if(1&t&&(a.TgZ(0,"nb-list-item"),a._UZ(1,"nb-news-post",4),a.qZA()),2&t){const t=e.$implicit;a.xp6(1),a.Q6J("post",t)}}function U(t,e){1&t&&(a.TgZ(0,"nb-list-item"),a._UZ(1,"nb-news-post-placeholder"),a.qZA())}function Q(t,e){if(1&t&&(a.TgZ(0,"nb-list-item"),a._UZ(1,"nb-news-post",4),a.qZA()),2&t){const t=e.$implicit;a.xp6(1),a.Q6J("post",t)}}function Y(t,e){1&t&&(a.TgZ(0,"nb-list-item"),a._UZ(1,"nb-news-post-placeholder"),a.qZA())}let I=(()=>{class t{constructor(t){this.newsService=t,this.firstCard={news:[],placeholders:[],loading:!1,pageToLoadNext:1},this.secondCard={news:[],placeholders:[],loading:!1,pageToLoadNext:1},this.pageSize=10}loadNext(t){t.loading||(t.loading=!0,t.placeholders=new Array(this.pageSize),this.newsService.load(t.pageToLoadNext,this.pageSize).subscribe(e=>{t.placeholders=[],t.news.push(...e),t.loading=!1,t.pageToLoadNext++}))}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(x))},t.\u0275cmp=a.Xpm({type:t,selectors:[["ng-component"]],features:[a._Bn([x])],decls:12,vars:6,consts:[[1,"own-scroll"],["nbInfiniteList","",3,"threshold","bottomThreshold"],[4,"ngFor","ngForOf"],["nbInfiniteList","","listenWindowScroll","",3,"threshold","bottomThreshold"],[3,"post"]],template:function(t,e){1&t&&(a.TgZ(0,"nb-card",0),a.TgZ(1,"nb-card-header"),a._uU(2," Own scroll "),a.qZA(),a.TgZ(3,"nb-list",1),a.NdJ("bottomThreshold",function(){return e.loadNext(e.firstCard)}),a.YNc(4,J,2,1,"nb-list-item",2),a.YNc(5,U,2,0,"nb-list-item",2),a.qZA(),a.qZA(),a.TgZ(6,"nb-card"),a.TgZ(7,"nb-card-header"),a._uU(8," Window scroll "),a.qZA(),a.TgZ(9,"nb-list",3),a.NdJ("bottomThreshold",function(){return e.loadNext(e.secondCard)}),a.YNc(10,Q,2,1,"nb-list-item",2),a.YNc(11,Y,2,0,"nb-list-item",2),a.qZA(),a.qZA()),2&t&&(a.xp6(3),a.Q6J("threshold",500),a.xp6(1),a.Q6J("ngForOf",e.firstCard.news),a.xp6(1),a.Q6J("ngForOf",e.firstCard.placeholders),a.xp6(4),a.Q6J("threshold",500),a.xp6(1),a.Q6J("ngForOf",e.secondCard.news),a.xp6(1),a.Q6J("ngForOf",e.secondCard.placeholders))},directives:[T.As,T.nd,f.z,y.s,n.sg,f.q,q,_],styles:["body{height:30rem}[_nghost-%COMP%]{display:block;margin:0 auto;max-width:50rem}.nb-spinner-container[_ngcontent-%COMP%]{flex:1 0 4rem}","[_nghost-%COMP%]{display:flex}nb-card[_ngcontent-%COMP%]{flex:1 1 45%;margin:0 2.5%}nb-card.own-scroll[_ngcontent-%COMP%]{height:30rem}"]}),t})();function L(t,e){if(1&t&&(a.TgZ(0,"nb-list-item"),a._UZ(1,"nb-news-post",2),a.qZA()),2&t){const t=e.$implicit;a.xp6(1),a.Q6J("post",t)}}function M(t,e){1&t&&(a.TgZ(0,"nb-list-item"),a._UZ(1,"nb-news-post-placeholder"),a.qZA())}let F=(()=>{class t{constructor(t){this.newsService=t,this.news=[],this.placeholders=[],this.pageSize=10,this.pageToLoadNext=1,this.loading=!1}loadNext(){this.loading||(this.loading=!0,this.placeholders=new Array(this.pageSize),this.newsService.load(this.pageToLoadNext,this.pageSize).subscribe(t=>{this.placeholders=[],this.news.push(...t),this.loading=!1,this.pageToLoadNext++}))}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(x))},t.\u0275cmp=a.Xpm({type:t,selectors:[["ng-component"]],features:[a._Bn([x])],decls:4,vars:3,consts:[["nbInfiniteList","","listenWindowScroll","",3,"threshold","bottomThreshold"],[4,"ngFor","ngForOf"],[3,"post"]],template:function(t,e){1&t&&(a.TgZ(0,"nb-card"),a.TgZ(1,"nb-list",0),a.NdJ("bottomThreshold",function(){return e.loadNext()}),a.YNc(2,L,2,1,"nb-list-item",1),a.YNc(3,M,2,0,"nb-list-item",1),a.qZA(),a.qZA()),2&t&&(a.xp6(1),a.Q6J("threshold",500),a.xp6(1),a.Q6J("ngForOf",e.news),a.xp6(1),a.Q6J("ngForOf",e.placeholders))},directives:[T.As,f.z,y.s,n.sg,f.q,q,_],styles:["body{height:30rem}[_nghost-%COMP%]{display:block;margin:0 auto;max-width:50rem}.nb-spinner-container[_ngcontent-%COMP%]{flex:1 0 4rem}"]}),t})();var k=s(45435),R=s(97268);function B(t,e){if(1&t&&(a.TgZ(0,"nb-list-item"),a._UZ(1,"nb-news-post",3),a.qZA()),2&t){const t=e.$implicit;a.xp6(1),a.Q6J("post",t)}}function H(t,e){1&t&&(a.TgZ(0,"nb-list-item"),a._UZ(1,"nb-news-post-placeholder"),a.qZA())}function $(t,e){const s=t.getComputedStyle(e),n=parseInt(s.getPropertyValue("margin-top"),10),i=parseInt(s.getPropertyValue("margin-bottom"),10);return e.offsetHeight+n+i}const X=[{path:"infinite-list-placeholders.component",component:z},{path:"infinite-list-scroll-modes.component",component:I},{path:"infinite-list-showcase.component",component:F},{path:"infinite-news-list.component",component:(()=>{class t{constructor(t,e,s,i,o,r){this.newsService=t,this.router=e,this.route=s,this.scrollService=i,this.platformId=o,this.window=r,this.news=[],this.placeholders=[],this.pageSize=10,this.loadingNext=!1,this.loadingPrevious=!1,(0,n.NF)(this.platformId)&&this.window.history.scrollRestoration&&(this.initialScrollRestoration=r.history.scrollRestoration,history.scrollRestoration="manual")}ngOnInit(){const{page:t}=this.route.snapshot.queryParams;this.startPage=t?Number.parseInt(t,10):1,this.pageToLoadNext=this.startPage}ngOnDestroy(){this.initialScrollRestoration&&(this.window.history.scrollRestoration=this.initialScrollRestoration)}updateUrl(t){this.router.navigate(["."],{queryParams:{page:t},replaceUrl:!0,relativeTo:this.route,queryParamsHandling:"merge"})}loadPrevious(){this.loadingPrevious||1===this.startPage||(this.loadingPrevious=!0,this.newsService.load(this.startPage-1,this.pageSize).subscribe(t=>{this.news.unshift(...t),this.loadingPrevious=!1,this.restoreScrollPosition(),this.startPage--}))}loadNext(){this.loadingNext||(this.loadingNext=!0,this.placeholders=new Array(this.pageSize),this.newsService.load(this.pageToLoadNext,this.pageSize).subscribe(t=>{this.placeholders=[],this.news.push(...t),this.loadingNext=!1,this.pageToLoadNext++}))}restoreScrollPosition(){const t=this.listItems.length>0?this.listItems.first.nativeElement:null;this.listItems.changes.pipe((0,w.U)(()=>this.listItems.first.nativeElement),(0,k.h)(e=>e!==t),(0,h.q)(1)).subscribe(()=>{let e=0;for(const{nativeElement:s}of this.listItems.toArray()){if(s===t)break;e+=$(this.window,s)}this.scrollService.scrollTo(null,e)})}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(x),a.Y36(l.F0),a.Y36(l.gz),a.Y36(S.H),a.Y36(a.Lbi),a.Y36(b.Q3))},t.\u0275cmp=a.Xpm({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){if(1&t&&a.Gf(f.q,5,a.SBq),2&t){let t;a.iGM(t=a.CRH())&&(e.listItems=t)}},features:[a._Bn([x])],decls:5,vars:6,consts:[[3,"nbSpinner"],["nbInfiniteList","","listenWindowScroll","","nbListPageTracker","",3,"threshold","pageSize","startPage","topThreshold","bottomThreshold","pageChange"],[4,"ngFor","ngForOf"],[3,"post"]],template:function(t,e){1&t&&(a.TgZ(0,"nb-card"),a._UZ(1,"div",0),a.TgZ(2,"nb-list",1),a.NdJ("topThreshold",function(){return e.loadPrevious()})("bottomThreshold",function(){return e.loadNext()})("pageChange",function(t){return e.updateUrl(t)}),a.YNc(3,B,2,1,"nb-list-item",2),a.YNc(4,H,2,0,"nb-list-item",2),a.qZA(),a.qZA()),2&t&&(a.xp6(1),a.Q6J("nbSpinner",e.loadingPrevious),a.xp6(1),a.Q6J("threshold",500)("pageSize",e.pageSize)("startPage",e.startPage),a.xp6(1),a.Q6J("ngForOf",e.news),a.xp6(1),a.Q6J("ngForOf",e.placeholders))},directives:[T.As,R.Q,f.z,y.s,N.B,n.sg,f.q,q,_],styles:["body{height:30rem}[_nghost-%COMP%]{display:block;margin:0 auto;max-width:50rem}.nb-spinner-container[_ngcontent-%COMP%]{flex:1 0 4rem}"]}),t})()}];let G=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[l.Bz.forChild(X)],l.Bz]}),t})(),W=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[n.ez,i.C,o.z,r.u,G]]}),t})()}}]);