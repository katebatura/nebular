"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[3582],{3582:(D,A,e)=>{e.d(A,{S:()=>N});var h=e(83668),g=e(86019),l=e(24301),d=e(49133),O=e(6512),p=e(85082),_=e(93973),n=e(49761),c=e(22625),r=e(66630),u=e(43004),E=e(83785),f=e(42369),i=e(29023),P=e(16807),t=e(37402),a=e(11004),o=e(97406),s=e(27431),y=e(48299),T=e(95170);function k(w,M){const R=[];return w.strategies.forEach(([U,b])=>{const v=M.get(U);v.setOptions(b),R.push(v)}),R}function m(w){const M=[];return w.forEach(R=>{M.push(R.getOption("token.class"))}),M}function S(w){return(0,T.ZB)(y.GI,w)}function C(w){return!0}let N=(()=>{class w{static forRoot(R){return{ngModule:w,providers:[{provide:y.sR,useValue:R},{provide:y.h,useFactory:S,deps:[y.sR]},{provide:y.ao,useFactory:k,deps:[y.h,h.zs3]},{provide:y.oB,useFactory:m,deps:[y.ao]},{provide:t.Z,useValue:f.xC},{provide:y.g5,useValue:"Authorization"},{provide:y.nN,useValue:C},{provide:i.i,useClass:i.e},t.r,E._,P.L,a.r,s.O,o.F]}}}return w.\u0275fac=function(R){return new(R||w)},w.\u0275mod=h.oAB({type:w}),w.\u0275inj=h.cJS({imports:[[g.ez,O.B,p.z,_.M,n.P,c.n,r.T,l.Bz,d.u5,u.K]]}),w})()},48299:(D,A,e)=>{e.d(A,{GI:()=>l,h:()=>d,sR:()=>O,ao:()=>p,oB:()=>_,g5:()=>n,nN:()=>c});var h=e(83668);const g=[],l={strategies:[],forms:{login:{redirectDelay:500,strategy:"email",rememberMe:!0,showMessages:{success:!0,error:!0},socialLinks:g},register:{redirectDelay:500,strategy:"email",showMessages:{success:!0,error:!0},terms:!0,socialLinks:g},requestPassword:{redirectDelay:500,strategy:"email",showMessages:{success:!0,error:!0},socialLinks:g},resetPassword:{redirectDelay:500,strategy:"email",showMessages:{success:!0,error:!0},socialLinks:g},logout:{redirectDelay:500,strategy:"email"},validation:{password:{required:!0,minLength:4,maxLength:50},email:{required:!0},fullName:{required:!1,minLength:4,maxLength:50}}}},d=new h.OlP("Nebular Auth Options"),O=new h.OlP("Nebular User Auth Options"),p=new h.OlP("Nebular Auth Strategies"),_=new h.OlP("Nebular Auth Tokens"),n=new h.OlP("Nebular Simple Interceptor Header"),c=new h.OlP("Nebular Interceptor Filter")},95170:(D,A,e)=>{e.d(A,{ZB:()=>h,hB:()=>O,XE:()=>p});const h=function(...c){if(arguments.length<1||"object"!=typeof arguments[0])return!1;if(arguments.length<2)return arguments[0];const r=arguments[0],u=Array.prototype.slice.call(arguments,1);let E,f;return u.forEach(function(i){"object"!=typeof i||Array.isArray(i)||Object.keys(i).forEach(function(P){if(f=r[P],E=i[P],E!==r)return"object"!=typeof E||null===E?void(r[P]=E):Array.isArray(E)?void(r[P]=d(E)):g(E)?void(r[P]=l(E)):"object"!=typeof f||null===f||Array.isArray(f)?void(r[P]=h({},E)):void(r[P]=h(f,E))})}),r};function g(c){return c instanceof Date||c instanceof RegExp}function l(c){if(c instanceof Date)return new Date(c.getTime());if(c instanceof RegExp)return new RegExp(c);throw new Error("cloneSpecificValue: Unexpected situation")}function d(c){const r=[];return c.forEach(function(u,E){r[E]="object"==typeof u&&null!==u?Array.isArray(u)?d(u):g(u)?l(u):h({},u):u}),r}function O(c={},r,u){const E=r.split(".");let f=h({},c||{});return E.forEach(i=>{f=f&&void 0!==f[i]?f[i]:void 0}),void 0===f?u:f}function p(c){let r=c.replace(/-/g,"+").replace(/_/g,"/");switch(r.length%4){case 0:break;case 2:r+="==";break;case 3:r+="=";break;default:throw new Error("Illegal base64url string!")}return function(c){return decodeURIComponent(Array.prototype.map.call(function(c){let u="";if((c=String(c).replace(/=+$/,"")).length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(let f,i,E=0,P=0;i=c.charAt(P++);~i&&(f=E%4?64*f+i:i,E++%4)?u+=String.fromCharCode(255&f>>(-2*E&6)):0)i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(i);return u}(c),r=>"%"+("00"+r.charCodeAt(0).toString(16)).slice(-2)).join(""))}(r)}},86334:(D,A,e)=>{e.d(A,{g:()=>h});class h{constructor(l,d,O,p,_,n=null){this.success=l,this.response=d,this.redirect=O,this.errors=[],this.messages=[],this.errors=this.errors.concat([p]),p instanceof Array&&(this.errors=p),this.messages=this.messages.concat([_]),_ instanceof Array&&(this.messages=_),this.token=n}getResponse(){return this.response}getToken(){return this.token}getRedirect(){return this.redirect}getErrors(){return this.errors.filter(l=>!!l)}getMessages(){return this.messages.filter(l=>!!l)}isSuccess(){return this.success}isFailure(){return!this.success}}},83785:(D,A,e)=>{e.d(A,{_:()=>_});var h=e(22411),g=e(38053),l=e(79204),d=e(48299),O=e(83668),p=e(16807);let _=(()=>{class n{constructor(r,u){this.tokenService=r,this.strategies=u}getToken(){return this.tokenService.get()}isAuthenticated(){return this.getToken().pipe((0,g.U)(r=>r.isValid()))}isAuthenticatedOrRefresh(){return this.getToken().pipe((0,l.w)(r=>r.getValue()&&!r.isValid()?this.refreshToken(r.getOwnerStrategyName(),r).pipe((0,l.w)(u=>u.isSuccess()?this.isAuthenticated():(0,h.of)(!1))):(0,h.of)(r.isValid())))}onTokenChange(){return this.tokenService.tokenChange()}onAuthenticationChange(){return this.onTokenChange().pipe((0,g.U)(r=>r.isValid()))}authenticate(r,u){return this.getStrategy(r).authenticate(u).pipe((0,l.w)(E=>this.processResultToken(E)))}register(r,u){return this.getStrategy(r).register(u).pipe((0,l.w)(E=>this.processResultToken(E)))}logout(r){return this.getStrategy(r).logout().pipe((0,l.w)(u=>(u.isSuccess()&&this.tokenService.clear().pipe((0,g.U)(()=>u)),(0,h.of)(u))))}requestPassword(r,u){return this.getStrategy(r).requestPassword(u)}resetPassword(r,u){return this.getStrategy(r).resetPassword(u)}refreshToken(r,u){return this.getStrategy(r).refreshToken(u).pipe((0,l.w)(E=>this.processResultToken(E)))}getStrategy(r){const u=this.strategies.find(E=>E.getName()===r);if(!u)throw new TypeError(`There is no Auth Strategy registered under '${r}' name`);return u}processResultToken(r){return r.isSuccess()&&r.getToken()?this.tokenService.set(r.getToken()).pipe((0,g.U)(u=>r)):(0,h.of)(r)}}return n.\u0275fac=function(r){return new(r||n)(O.LFG(p.L),O.LFG(d.ao))},n.\u0275prov=O.Yz7({token:n,factory:n.\u0275fac}),n})()},37402:(D,A,e)=>{e.d(A,{Z:()=>d,r:()=>O});var h=e(83668),g=e(42369),l=e(48299);const d=new h.OlP("Nebular Auth Options");let O=(()=>{class p{constructor(n,c){this.fallbackClass=n,this.tokenClasses=c}wrap(n){return JSON.stringify({name:n.getName(),ownerStrategyName:n.getOwnerStrategyName(),createdAt:n.getCreatedAt().getTime(),value:n.toString()})}unwrap(n){let c=this.fallbackClass,r="",u="",E=null;const f=this.parseTokenPack(n);return f&&(c=this.getClassByName(f.name)||this.fallbackClass,r=f.value,u=f.ownerStrategyName,E=new Date(Number(f.createdAt))),(0,g.P_)(c,r,u,E)}getClassByName(n){return this.tokenClasses.find(c=>c.NAME===n)}parseTokenPack(n){try{return JSON.parse(n)}catch(c){}return null}}return p.\u0275fac=function(n){return new(n||p)(h.LFG(d),h.LFG(l.oB))},p.\u0275prov=h.Yz7({token:p,factory:p.\u0275fac}),p})()},29023:(D,A,e)=>{e.d(A,{i:()=>l,e:()=>d});var h=e(83668),g=e(37402);class l{}let d=(()=>{class O extends l{constructor(_){super(),this.parceler=_,this.key="auth_app_token"}get(){const _=localStorage.getItem(this.key);return this.parceler.unwrap(_)}set(_){const n=this.parceler.wrap(_);localStorage.setItem(this.key,n)}clear(){localStorage.removeItem(this.key)}}return O.\u0275fac=function(_){return new(_||O)(h.LFG(g.r))},O.\u0275prov=h.Yz7({token:O,factory:O.\u0275fac}),O})()},16807:(D,A,e)=>{e.d(A,{L:()=>_});var h=e(34099),g=e(22411),l=e(18735),d=e(70550),O=e(83668),p=e(29023);let _=(()=>{class n{constructor(r){this.tokenStorage=r,this.token$=new h.X(null),this.publishStoredToken()}tokenChange(){return this.token$.pipe((0,l.h)(r=>!!r),(0,d.B)())}set(r){return this.tokenStorage.set(r),this.publishStoredToken(),(0,g.of)(null)}get(){const r=this.tokenStorage.get();return(0,g.of)(r)}clear(){return this.tokenStorage.clear(),this.publishStoredToken(),(0,g.of)(null)}publishStoredToken(){this.token$.next(this.tokenStorage.get())}}return n.\u0275fac=function(r){return new(r||n)(O.LFG(p.i))},n.\u0275prov=O.Yz7({token:n,factory:n.\u0275fac}),n})()},42369:(D,A,e)=>{e.d(A,{ww:()=>d,P_:()=>_,xC:()=>c,OS:()=>r,FN:()=>E,Xq:()=>f});var h=e(95170);class l extends Error{constructor(P){super(P),Object.setPrototypeOf(this,new.target.prototype)}}class d extends Error{constructor(P){super(P),Object.setPrototypeOf(this,new.target.prototype)}}class O extends d{constructor(P){super(P),Object.setPrototypeOf(this,new.target.prototype)}}class p extends d{constructor(P){super(P),Object.setPrototypeOf(this,new.target.prototype)}}function _(i,P,t,a){return new i(P,t,a)}function n(i){if(0===i.length)throw new O("Cannot extract from an empty payload.");const P=i.split(".");if(3!==P.length)throw new p(`The payload ${i} is not valid JWT payload and must consist of three parts.`);let t;try{t=(0,h.XE)(P[1])}catch(a){throw new p(`The payload ${i} is not valid JWT payload and cannot be parsed.`)}if(!t)throw new p(`The payload ${i} is not valid JWT payload and cannot be decoded.`);return JSON.parse(t)}let c=(()=>{class i extends class{constructor(){this.payload=null}getName(){return this.constructor.NAME}getPayload(){return this.payload}}{constructor(t,a,o){super(),this.token=t,this.ownerStrategyName=a,this.createdAt=o;try{this.parsePayload()}catch(s){if(!(s instanceof l))throw s}this.createdAt=this.prepareCreatedAt(o)}parsePayload(){this.payload=null}prepareCreatedAt(t){return t||new Date}getCreatedAt(){return this.createdAt}getValue(){return this.token}getOwnerStrategyName(){return this.ownerStrategyName}isValid(){return!!this.getValue()}toString(){return this.token?this.token:""}}return i.NAME="nb:auth:simple:token",i})(),r=(()=>{class i extends c{prepareCreatedAt(t){const a=this.getPayload();return a&&a.iat?new Date(1e3*Number(a.iat)):super.prepareCreatedAt(t)}parsePayload(){if(!this.token)throw new l("Token not found. ");this.payload=n(this.token)}getTokenExpDate(){const t=this.getPayload();if(t&&!t.hasOwnProperty("exp"))return null;const a=new Date(0);return a.setUTCSeconds(t.exp),a}isValid(){return super.isValid()&&(!this.getTokenExpDate()||new Date<this.getTokenExpDate())}}return i.NAME="nb:auth:jwt:token",i})(),E=(()=>{class i extends c{constructor(t={},a,o){super((i=>{if("string"==typeof i)try{return JSON.parse(i)}catch(P){}return i})(t),a,o)}getValue(){return this.token.access_token}getRefreshToken(){return this.token.refresh_token}setRefreshToken(t){this.token.refresh_token=t}parsePayload(){if(!this.token)throw new l("Token not found.");if(!Object.keys(this.token).length)throw new O("Cannot extract payload from an empty token.");this.payload=this.token}getType(){return this.token.token_type}isValid(){return super.isValid()&&(!this.getTokenExpDate()||new Date<this.getTokenExpDate())}getTokenExpDate(){return this.token.hasOwnProperty("expires_in")?new Date(this.createdAt.getTime()+1e3*Number(this.token.expires_in)):null}toString(){return JSON.stringify(this.token)}}return i.NAME="nb:auth:oauth2:token",i})(),f=(()=>{class i extends E{parsePayload(){super.parsePayload(),this.parseAccessTokenPayload()}parseAccessTokenPayload(){const t=this.getValue();if(!t)throw new l("access_token key not found.");this.accessTokenPayload=n(t)}getAccessTokenPayload(){return this.accessTokenPayload}prepareCreatedAt(t){const a=this.accessTokenPayload;return a&&a.iat?new Date(1e3*Number(a.iat)):super.prepareCreatedAt(t)}isValid(){return this.accessTokenPayload&&super.isValid()}getTokenExpDate(){if(this.accessTokenPayload&&this.accessTokenPayload.hasOwnProperty("exp")){const t=new Date(0);return t.setUTCSeconds(this.accessTokenPayload.exp),t}return super.getTokenExpDate()}}return i.NAME="nb:auth:oauth2:jwt:token",i})()},72337:(D,A,e)=>{e.d(A,{Y:()=>h});class h{}},8177:(D,A,e)=>{e.d(A,{D:()=>d});var h=e(44522),g=e(95170),l=e(42369);class d{setOptions(p){this.options=(0,g.ZB)({},this.defaultOptions,p)}getOption(p){return(0,g.hB)(this.options,p,null)}createToken(p,_){const n=(0,l.P_)(this.getOption("token.class"),p,this.getName());if(_&&!n.isValid())throw new l.ww("Token is empty or invalid.");return n}getName(){return this.getOption("name")}createFailResponse(p){return new h.Zn({body:{},status:401})}createSuccessResponse(p){return new h.Zn({body:{},status:200})}getActionEndpoint(p){const _=this.getOption(`${p}.endpoint`),n=this.getOption("baseEndpoint");return _?n+_:""}getHeaders(){var p;const _=null!==(p=this.getOption("headers"))&&void 0!==p?p:{};if(_ instanceof h.WM)return _;let n=new h.WM;return Object.entries(_).forEach(([c,r])=>{n=n.append(c,r)}),n}}},11004:(D,A,e)=>{e.d(A,{r:()=>r});var h=e(22411),g=e(5250),l=e(8177),d=e(86334),O=e(72337),p=e(42369);const n=new class extends O.Y{constructor(){super(...arguments),this.token={class:p.xC},this.delay=1e3,this.alwaysFail=!1}};var c=e(83668);let r=(()=>{class u extends l.D{constructor(){super(...arguments),this.defaultOptions=n}static setup(f){return[u,f]}authenticate(f){return(0,h.of)(this.createDummyResult(f)).pipe((0,g.g)(this.getOption("delay")))}register(f){return(0,h.of)(this.createDummyResult(f)).pipe((0,g.g)(this.getOption("delay")))}requestPassword(f){return(0,h.of)(this.createDummyResult(f)).pipe((0,g.g)(this.getOption("delay")))}resetPassword(f){return(0,h.of)(this.createDummyResult(f)).pipe((0,g.g)(this.getOption("delay")))}logout(f){return(0,h.of)(this.createDummyResult(f)).pipe((0,g.g)(this.getOption("delay")))}refreshToken(f){return(0,h.of)(this.createDummyResult(f)).pipe((0,g.g)(this.getOption("delay")))}createDummyResult(f){if(this.getOption("alwaysFail"))return new d.g(!1,this.createFailResponse(f),null,["Something went wrong."]);try{const i=this.createToken("test token",!0);return new d.g(!0,this.createSuccessResponse(f),"/",[],["Successfully logged in."],i)}catch(i){return new d.g(!1,this.createFailResponse(f),null,[i.message])}}}return u.\u0275fac=function(){let E;return function(i){return(E||(E=c.n5z(u)))(i||u)}}(),u.\u0275prov=c.Yz7({token:u,factory:u.\u0275fac}),u})()},3203:(D,A,e)=>{e.d(A,{aW:()=>l,sY:()=>d,rW:()=>O,N2:()=>_});var h=e(42369),g=e(72337),l=(()=>{return(n=l||(l={})).CODE="code",n.TOKEN="token",l;var n})(),d=(()=>{return(n=d||(d={})).AUTHORIZATION_CODE="authorization_code",n.PASSWORD="password",n.REFRESH_TOKEN="refresh_token",d;var n})(),O=(()=>{return(n=O||(O={})).NONE="none",n.BASIC="basic",n.REQUEST_BODY="request-body",O;var n})();const _=new class extends g.Y{constructor(){super(...arguments),this.baseEndpoint="",this.clientId="",this.clientSecret="",this.clientAuthMethod=O.NONE,this.redirect={success:"/",failure:null},this.defaultErrors=["Something went wrong, please try again."],this.defaultMessages=["You have been successfully authenticated."],this.authorize={endpoint:"authorize",responseType:l.CODE,requireValidToken:!0},this.token={endpoint:"token",grantType:d.AUTHORIZATION_CODE,requireValidToken:!0,class:h.FN},this.refresh={endpoint:"token",grantType:d.REFRESH_TOKEN,requireValidToken:!0}}}},97406:(D,A,e)=>{e.d(A,{F:()=>f});var h=e(44522),g=e(22411),l=e(79204),d=e(38053),O=e(52047),p=e(93049),_=e(8177),n=e(42369),c=e(86334),r=e(3203),u=e(83668),E=e(24301);let f=(()=>{class i extends _.D{constructor(t,a,o){super(),this.http=t,this.route=a,this.window=o,this.redirectResultHandlers={[r.aW.CODE]:()=>(0,g.of)(this.route.snapshot.queryParams).pipe((0,l.w)(s=>s.code?this.requestToken(s.code):(0,g.of)(new c.g(!1,s,this.getOption("redirect.failure"),this.getOption("defaultErrors"),[])))),[r.aW.TOKEN]:()=>{const y=this.getOption("authorize.requireValidToken");return(0,g.of)(this.route.snapshot.fragment).pipe((0,d.U)(T=>this.parseHashAsQueryParams(T)),(0,d.U)(T=>T.error?new c.g(!1,T,this.getOption("redirect.failure"),this.getOption("defaultErrors"),[]):new c.g(!0,T,this.getOption("redirect.success"),[],this.getOption("defaultMessages"),this.createToken(T,y))),(0,O.K)(T=>{const k=[];return k.push(T instanceof n.ww?T.message:"Something went wrong."),(0,g.of)(new c.g(!1,T,this.getOption("redirect.failure"),k))}))}},this.redirectResults={[r.aW.CODE]:()=>(0,g.of)(this.route.snapshot.queryParams).pipe((0,d.U)(s=>!(!s||!s.code&&!s.error))),[r.aW.TOKEN]:()=>(0,g.of)(this.route.snapshot.fragment).pipe((0,d.U)(s=>this.parseHashAsQueryParams(s)),(0,d.U)(s=>!(!s||!s.access_token&&!s.error)))},this.defaultOptions=r.N2}static setup(t){return[i,t]}get responseType(){return this.getOption("authorize.responseType")}get clientAuthMethod(){return this.getOption("clientAuthMethod")}authenticate(t){return this.getOption("token.grantType")===r.sY.PASSWORD?this.passwordToken(t.email,t.password):this.isRedirectResult().pipe((0,l.w)(a=>a?this.getAuthorizationResult():(this.authorizeRedirect(),(0,g.of)(new c.g(!0)))))}getAuthorizationResult(){const t=this.redirectResultHandlers[this.responseType];if(t)return t.call(this);throw new Error(`'${this.responseType}' responseType is not supported,\n                      only 'token' and 'code' are supported now`)}refreshToken(t){const a="refresh",o=this.getActionEndpoint(a),s=this.getOption(`${a}.requireValidToken`);return this.http.post(o,this.buildRefreshRequestData(t),{headers:this.getHeaders()}).pipe((0,d.U)(y=>new c.g(!0,y,this.getOption("redirect.success"),[],this.getOption("defaultMessages"),this.createRefreshedToken(y,t,s))),(0,O.K)(y=>this.handleResponseError(y)))}passwordToken(t,a){const o="token",s=this.getActionEndpoint(o),y=this.getOption(`${o}.requireValidToken`);return this.http.post(s,this.buildPasswordRequestData(t,a),{headers:this.getHeaders()}).pipe((0,d.U)(T=>new c.g(!0,T,this.getOption("redirect.success"),[],this.getOption("defaultMessages"),this.createToken(T,y))),(0,O.K)(T=>this.handleResponseError(T)))}authorizeRedirect(){this.window.location.href=this.buildRedirectUrl()}isRedirectResult(){return this.redirectResults[this.responseType].call(this)}requestToken(t){const a="token",o=this.getActionEndpoint(a),s=this.getOption(`${a}.requireValidToken`);return this.http.post(o,this.buildCodeRequestData(t),{headers:this.getHeaders()}).pipe((0,d.U)(y=>new c.g(!0,y,this.getOption("redirect.success"),[],this.getOption("defaultMessages"),this.createToken(y,s))),(0,O.K)(y=>this.handleResponseError(y)))}buildCodeRequestData(t){const a={grant_type:this.getOption("token.grantType"),code:t,redirect_uri:this.getOption("token.redirectUri"),client_id:this.getOption("clientId")};return this.urlEncodeParameters(this.cleanParams(this.addCredentialsToParams(a)))}buildRefreshRequestData(t){const a={grant_type:this.getOption("refresh.grantType"),refresh_token:t.getRefreshToken(),scope:this.getOption("refresh.scope"),client_id:this.getOption("clientId")};return this.urlEncodeParameters(this.cleanParams(this.addCredentialsToParams(a)))}buildPasswordRequestData(t,a){const o={grant_type:this.getOption("token.grantType"),username:t,password:a,scope:this.getOption("token.scope")};return this.urlEncodeParameters(this.cleanParams(this.addCredentialsToParams(o)))}buildAuthHeader(){if(this.clientAuthMethod===r.rW.BASIC){if(this.getOption("clientId")&&this.getOption("clientSecret"))return new h.WM({Authorization:"Basic "+btoa(this.getOption("clientId")+":"+this.getOption("clientSecret"))});throw Error("For basic client authentication method, please provide both clientId & clientSecret.")}}getHeaders(){let t=super.getHeaders();t=t.append("Content-Type","application/x-www-form-urlencoded");const a=this.buildAuthHeader();if(void 0===a)return t;for(const o of a.keys())for(const s of a.getAll(o))t=t.append(o,s);return t}cleanParams(t){return Object.entries(t).forEach(([a,o])=>!o&&delete t[a]),t}addCredentialsToParams(t){if(this.clientAuthMethod===r.rW.REQUEST_BODY){if(this.getOption("clientId")&&this.getOption("clientSecret"))return Object.assign(Object.assign({},t),{client_id:this.getOption("clientId"),client_secret:this.getOption("clientSecret")});throw Error("For request body client authentication method, please provide both clientId & clientSecret.")}return t}handleResponseError(t){let a=[];return t instanceof h.UA?t.error.error_description?a.push(t.error.error_description):a=this.getOption("defaultErrors"):a.push(t instanceof n.ww?t.message:"Something went wrong."),(0,g.of)(new c.g(!1,t,this.getOption("redirect.failure"),a,[]))}buildRedirectUrl(){const t=Object.assign({response_type:this.getOption("authorize.responseType"),client_id:this.getOption("clientId"),redirect_uri:this.getOption("authorize.redirectUri"),scope:this.getOption("authorize.scope"),state:this.getOption("authorize.state")},this.getOption("authorize.params"));return`${this.getActionEndpoint("authorize")}?${this.urlEncodeParameters(this.cleanParams(t))}`}parseHashAsQueryParams(t){return t?t.split("&").reduce((a,o)=>{const s=o.split("=");return a[s[0]]=decodeURIComponent(s[1]),a},{}):{}}urlEncodeParameters(t){return Object.keys(t).map(a=>`${encodeURIComponent(a)}=${encodeURIComponent(t[a])}`).join("&")}createRefreshedToken(t,a,o){const s=this.createToken(t,o);return!s.getRefreshToken()&&a.getRefreshToken()&&s.setRefreshToken(a.getRefreshToken()),s}register(t){throw new Error("`register` is not supported by `NbOAuth2AuthStrategy`, use `authenticate`.")}requestPassword(t){throw new Error("`requestPassword` is not supported by `NbOAuth2AuthStrategy`, use `authenticate`.")}resetPassword(t={}){throw new Error("`resetPassword` is not supported by `NbOAuth2AuthStrategy`, use `authenticate`.")}logout(){return(0,g.of)(new c.g(!0))}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(h.eN),u.LFG(E.gz),u.LFG(p.Q3))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})()},27431:(D,A,e)=>{e.d(A,{O:()=>P});var h=e(44522),g=e(22411),l=e(38053),d=e(52047),O=e(79204),p=e(86334),_=e(8177),n=e(42369),c=e(72337),r=e(95170);const E=new class extends c.Y{constructor(){super(...arguments),this.baseEndpoint="/api/auth/",this.login={alwaysFail:!1,endpoint:"login",method:"post",requireValidToken:!0,redirect:{success:"/",failure:null},defaultErrors:["Login/Email combination is not correct, please try again."],defaultMessages:["You have been successfully logged in."]},this.register={alwaysFail:!1,endpoint:"register",method:"post",requireValidToken:!0,redirect:{success:"/",failure:null},defaultErrors:["Something went wrong, please try again."],defaultMessages:["You have been successfully registered."]},this.requestPass={endpoint:"request-pass",method:"post",redirect:{success:"/",failure:null},defaultErrors:["Something went wrong, please try again."],defaultMessages:["Reset password instructions have been sent to your email."]},this.resetPass={endpoint:"reset-pass",method:"put",redirect:{success:"/",failure:null},resetPasswordTokenKey:"reset_password_token",defaultErrors:["Something went wrong, please try again."],defaultMessages:["Your password has been successfully changed."]},this.logout={alwaysFail:!1,endpoint:"logout",method:"delete",redirect:{success:"/",failure:null},defaultErrors:["Something went wrong, please try again."],defaultMessages:["You have been successfully logged out."]},this.refreshToken={endpoint:"refresh-token",method:"post",requireValidToken:!0,redirect:{success:null,failure:null},defaultErrors:["Something went wrong, please try again."],defaultMessages:["Your token has been successfully refreshed."]},this.token={class:n.xC,key:"data.token",getter:(a,o,s)=>(0,r.hB)(o.body,s.token.key)},this.errors={key:"data.errors",getter:(a,o,s)=>(0,r.hB)(o.error,s.errors.key,s[a].defaultErrors)},this.messages={key:"data.messages",getter:(a,o,s)=>(0,r.hB)(o.body,s.messages.key,s[a].defaultMessages)}}};var f=e(83668),i=e(24301);let P=(()=>{class t extends _.D{constructor(o,s){super(),this.http=o,this.route=s,this.defaultOptions=E}static setup(o){return[t,o]}authenticate(o){const s="login",y=this.getOption(`${s}.method`),T=this.getActionEndpoint(s),k=this.getOption(`${s}.requireValidToken`);return this.http.request(y,T,{body:o,observe:"response",headers:this.getHeaders()}).pipe((0,l.U)(m=>{if(this.getOption(`${s}.alwaysFail`))throw this.createFailResponse(o);return m}),(0,l.U)(m=>new p.g(!0,m,this.getOption(`${s}.redirect.success`),[],this.getOption("messages.getter")(s,m,this.options),this.createToken(this.getOption("token.getter")(s,m,this.options),k))),(0,d.K)(m=>this.handleResponseError(m,s)))}register(o){const s="register",y=this.getOption(`${s}.method`),T=this.getActionEndpoint(s),k=this.getOption(`${s}.requireValidToken`);return this.http.request(y,T,{body:o,observe:"response",headers:this.getHeaders()}).pipe((0,l.U)(m=>{if(this.getOption(`${s}.alwaysFail`))throw this.createFailResponse(o);return m}),(0,l.U)(m=>new p.g(!0,m,this.getOption(`${s}.redirect.success`),[],this.getOption("messages.getter")(s,m,this.options),this.createToken(this.getOption("token.getter")("login",m,this.options),k))),(0,d.K)(m=>this.handleResponseError(m,s)))}requestPassword(o){const s="requestPass",y=this.getOption(`${s}.method`),T=this.getActionEndpoint(s);return this.http.request(y,T,{body:o,observe:"response",headers:this.getHeaders()}).pipe((0,l.U)(k=>{if(this.getOption(`${s}.alwaysFail`))throw this.createFailResponse();return k}),(0,l.U)(k=>new p.g(!0,k,this.getOption(`${s}.redirect.success`),[],this.getOption("messages.getter")(s,k,this.options))),(0,d.K)(k=>this.handleResponseError(k,s)))}resetPassword(o={}){const s="resetPass",y=this.getOption(`${s}.method`),T=this.getActionEndpoint(s),k=this.getOption(`${s}.resetPasswordTokenKey`);return o[k]=this.route.snapshot.queryParams[k],this.http.request(y,T,{body:o,observe:"response",headers:this.getHeaders()}).pipe((0,l.U)(m=>{if(this.getOption(`${s}.alwaysFail`))throw this.createFailResponse();return m}),(0,l.U)(m=>new p.g(!0,m,this.getOption(`${s}.redirect.success`),[],this.getOption("messages.getter")(s,m,this.options))),(0,d.K)(m=>this.handleResponseError(m,s)))}logout(){const o="logout",s=this.getOption(`${o}.method`),y=this.getActionEndpoint(o);return(0,g.of)({}).pipe((0,O.w)(T=>y?this.http.request(s,y,{observe:"response",headers:this.getHeaders()}):(0,g.of)(T)),(0,l.U)(T=>{if(this.getOption(`${o}.alwaysFail`))throw this.createFailResponse();return T}),(0,l.U)(T=>new p.g(!0,T,this.getOption(`${o}.redirect.success`),[],this.getOption("messages.getter")(o,T,this.options))),(0,d.K)(T=>this.handleResponseError(T,o)))}refreshToken(o){const s="refreshToken",y=this.getOption(`${s}.method`),T=this.getActionEndpoint(s),k=this.getOption(`${s}.requireValidToken`);return this.http.request(y,T,{body:o,observe:"response",headers:this.getHeaders()}).pipe((0,l.U)(m=>{if(this.getOption(`${s}.alwaysFail`))throw this.createFailResponse(o);return m}),(0,l.U)(m=>new p.g(!0,m,this.getOption(`${s}.redirect.success`),[],this.getOption("messages.getter")(s,m,this.options),this.createToken(this.getOption("token.getter")(s,m,this.options),k))),(0,d.K)(m=>this.handleResponseError(m,s)))}handleResponseError(o,s){let y=[];return o instanceof h.UA?y=this.getOption("errors.getter")(s,o,this.options):y.push(o instanceof n.ww?o.message:"Something went wrong."),(0,g.of)(new p.g(!1,o,this.getOption(`${s}.redirect.failure`),y))}}return t.\u0275fac=function(o){return new(o||t)(f.LFG(h.eN),f.LFG(i.gz))},t.\u0275prov=f.Yz7({token:t,factory:t.\u0275fac}),t})()},49761:(D,A,e)=>{e.d(A,{P:()=>l});var h=e(35861),g=e(83668);let l=(()=>{class d{}return d.\u0275fac=function(p){return new(p||d)},d.\u0275mod=g.oAB({type:d}),d.\u0275inj=g.cJS({imports:[[h.P]]}),d})()}}]);