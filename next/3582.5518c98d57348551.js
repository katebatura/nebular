"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[3582],{3582:(D,A,e)=>{e.d(A,{S:()=>N});var h=e(83668),p=e(86019),l=e(24301),c=e(49133),f=e(9114),g=e(85082),T=e(93973),n=e(49761),d=e(22625),r=e(66630),i=e(43004),E=e(83785),O=e(42369),a=e(29023),P=e(16807),t=e(37402),u=e(11004),o=e(97406),s=e(27431),y=e(48299),_=e(95170);function k(w,R){const M=[];return w.strategies.forEach(([U,b])=>{const v=R.get(U);v.setOptions(b),M.push(v)}),M}function m(w){const R=[];return w.forEach(M=>{R.push(M.getOption("token.class"))}),R}function S(w){return(0,_.ZB)(y.GI,w)}function C(w){return!0}let N=(()=>{class w{static forRoot(M){return{ngModule:w,providers:[{provide:y.sR,useValue:M},{provide:y.h,useFactory:S,deps:[y.sR]},{provide:y.ao,useFactory:k,deps:[y.h,h.zs3]},{provide:y.oB,useFactory:m,deps:[y.ao]},{provide:t.Z,useValue:O.xC},{provide:y.g5,useValue:"Authorization"},{provide:y.nN,useValue:C},{provide:a.i,useClass:a.e},t.r,E._,P.L,u.r,s.O,o.F]}}}return w.\u0275fac=function(M){return new(M||w)},w.\u0275mod=h.oAB({type:w}),w.\u0275inj=h.cJS({imports:[[p.ez,f.B,g.z,T.M,n.P,d.n,r.T,l.Bz,c.u5,i.K]]}),w})()},48299:(D,A,e)=>{e.d(A,{GI:()=>l,h:()=>c,sR:()=>f,ao:()=>g,oB:()=>T,g5:()=>n,nN:()=>d});var h=e(83668);const p=[],l={strategies:[],forms:{login:{redirectDelay:500,strategy:"email",rememberMe:!0,showMessages:{success:!0,error:!0},socialLinks:p},register:{redirectDelay:500,strategy:"email",showMessages:{success:!0,error:!0},terms:!0,socialLinks:p},requestPassword:{redirectDelay:500,strategy:"email",showMessages:{success:!0,error:!0},socialLinks:p},resetPassword:{redirectDelay:500,strategy:"email",showMessages:{success:!0,error:!0},socialLinks:p},logout:{redirectDelay:500,strategy:"email"},validation:{password:{required:!0,minLength:4,maxLength:50},email:{required:!0},fullName:{required:!1,minLength:4,maxLength:50}}}},c=new h.OlP("Nebular Auth Options"),f=new h.OlP("Nebular User Auth Options"),g=new h.OlP("Nebular Auth Strategies"),T=new h.OlP("Nebular Auth Tokens"),n=new h.OlP("Nebular Simple Interceptor Header"),d=new h.OlP("Nebular Interceptor Filter")},95170:(D,A,e)=>{e.d(A,{ZB:()=>h,hB:()=>f,XE:()=>g});const h=function(...d){if(arguments.length<1||"object"!=typeof arguments[0])return!1;if(arguments.length<2)return arguments[0];const r=arguments[0],i=Array.prototype.slice.call(arguments,1);let E,O;return i.forEach(function(a){"object"!=typeof a||Array.isArray(a)||Object.keys(a).forEach(function(P){if(O=r[P],E=a[P],E!==r)return"object"!=typeof E||null===E?void(r[P]=E):Array.isArray(E)?void(r[P]=c(E)):p(E)?void(r[P]=l(E)):"object"!=typeof O||null===O||Array.isArray(O)?void(r[P]=h({},E)):void(r[P]=h(O,E))})}),r};function p(d){return d instanceof Date||d instanceof RegExp}function l(d){if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp)return new RegExp(d);throw new Error("cloneSpecificValue: Unexpected situation")}function c(d){const r=[];return d.forEach(function(i,E){r[E]="object"==typeof i&&null!==i?Array.isArray(i)?c(i):p(i)?l(i):h({},i):i}),r}function f(d={},r,i){const E=r.split(".");let O=h({},d||{});return E.forEach(a=>{O=O&&void 0!==O[a]?O[a]:void 0}),void 0===O?i:O}function g(d){let r=d.replace(/-/g,"+").replace(/_/g,"/");switch(r.length%4){case 0:break;case 2:r+="==";break;case 3:r+="=";break;default:throw new Error("Illegal base64url string!")}return function(d){return decodeURIComponent(Array.prototype.map.call(function(d){let i="";if((d=String(d).replace(/=+$/,"")).length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(let O,a,E=0,P=0;a=d.charAt(P++);~a&&(O=E%4?64*O+a:a,E++%4)?i+=String.fromCharCode(255&O>>(-2*E&6)):0)a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a);return i}(d),r=>"%"+("00"+r.charCodeAt(0).toString(16)).slice(-2)).join(""))}(r)}},86334:(D,A,e)=>{e.d(A,{g:()=>h});class h{constructor(l,c,f,g,T,n=null){this.success=l,this.response=c,this.redirect=f,this.errors=[],this.messages=[],this.errors=this.errors.concat([g]),g instanceof Array&&(this.errors=g),this.messages=this.messages.concat([T]),T instanceof Array&&(this.messages=T),this.token=n}getResponse(){return this.response}getToken(){return this.token}getRedirect(){return this.redirect}getErrors(){return this.errors.filter(l=>!!l)}getMessages(){return this.messages.filter(l=>!!l)}isSuccess(){return this.success}isFailure(){return!this.success}}},83785:(D,A,e)=>{e.d(A,{_:()=>T});var h=e(22411),p=e(38053),l=e(79204),c=e(48299),f=e(83668),g=e(16807);let T=(()=>{class n{constructor(r,i){this.tokenService=r,this.strategies=i}getToken(){return this.tokenService.get()}isAuthenticated(){return this.getToken().pipe((0,p.U)(r=>r.isValid()))}isAuthenticatedOrRefresh(){return this.getToken().pipe((0,l.w)(r=>r.getValue()&&!r.isValid()?this.refreshToken(r.getOwnerStrategyName(),r).pipe((0,l.w)(i=>i.isSuccess()?this.isAuthenticated():(0,h.of)(!1))):(0,h.of)(r.isValid())))}onTokenChange(){return this.tokenService.tokenChange()}onAuthenticationChange(){return this.onTokenChange().pipe((0,p.U)(r=>r.isValid()))}authenticate(r,i){return this.getStrategy(r).authenticate(i).pipe((0,l.w)(E=>this.processResultToken(E)))}register(r,i){return this.getStrategy(r).register(i).pipe((0,l.w)(E=>this.processResultToken(E)))}logout(r){return this.getStrategy(r).logout().pipe((0,l.w)(i=>(i.isSuccess()&&this.tokenService.clear().pipe((0,p.U)(()=>i)),(0,h.of)(i))))}requestPassword(r,i){return this.getStrategy(r).requestPassword(i)}resetPassword(r,i){return this.getStrategy(r).resetPassword(i)}refreshToken(r,i){return this.getStrategy(r).refreshToken(i).pipe((0,l.w)(E=>this.processResultToken(E)))}getStrategy(r){const i=this.strategies.find(E=>E.getName()===r);if(!i)throw new TypeError(`There is no Auth Strategy registered under '${r}' name`);return i}processResultToken(r){return r.isSuccess()&&r.getToken()?this.tokenService.set(r.getToken()).pipe((0,p.U)(i=>r)):(0,h.of)(r)}}return n.\u0275fac=function(r){return new(r||n)(f.LFG(g.L),f.LFG(c.ao))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})()},37402:(D,A,e)=>{e.d(A,{Z:()=>c,r:()=>f});var h=e(83668),p=e(42369),l=e(48299);const c=new h.OlP("Nebular Auth Options");let f=(()=>{class g{constructor(n,d){this.fallbackClass=n,this.tokenClasses=d}wrap(n){return JSON.stringify({name:n.getName(),ownerStrategyName:n.getOwnerStrategyName(),createdAt:n.getCreatedAt().getTime(),value:n.toString()})}unwrap(n){let d=this.fallbackClass,r="",i="",E=null;const O=this.parseTokenPack(n);return O&&(d=this.getClassByName(O.name)||this.fallbackClass,r=O.value,i=O.ownerStrategyName,E=new Date(Number(O.createdAt))),(0,p.P_)(d,r,i,E)}getClassByName(n){return this.tokenClasses.find(d=>d.NAME===n)}parseTokenPack(n){try{return JSON.parse(n)}catch(d){}return null}}return g.\u0275fac=function(n){return new(n||g)(h.LFG(c),h.LFG(l.oB))},g.\u0275prov=h.Yz7({token:g,factory:g.\u0275fac}),g})()},29023:(D,A,e)=>{e.d(A,{i:()=>l,e:()=>c});var h=e(83668),p=e(37402);class l{}let c=(()=>{class f extends l{constructor(T){super(),this.parceler=T,this.key="auth_app_token"}get(){const T=localStorage.getItem(this.key);return this.parceler.unwrap(T)}set(T){const n=this.parceler.wrap(T);localStorage.setItem(this.key,n)}clear(){localStorage.removeItem(this.key)}}return f.\u0275fac=function(T){return new(T||f)(h.LFG(p.r))},f.\u0275prov=h.Yz7({token:f,factory:f.\u0275fac}),f})()},16807:(D,A,e)=>{e.d(A,{L:()=>T});var h=e(34099),p=e(22411),l=e(18735),c=e(70550),f=e(83668),g=e(29023);let T=(()=>{class n{constructor(r){this.tokenStorage=r,this.token$=new h.X(null),this.publishStoredToken()}tokenChange(){return this.token$.pipe((0,l.h)(r=>!!r),(0,c.B)())}set(r){return this.tokenStorage.set(r),this.publishStoredToken(),(0,p.of)(null)}get(){const r=this.tokenStorage.get();return(0,p.of)(r)}clear(){return this.tokenStorage.clear(),this.publishStoredToken(),(0,p.of)(null)}publishStoredToken(){this.token$.next(this.tokenStorage.get())}}return n.\u0275fac=function(r){return new(r||n)(f.LFG(g.i))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})()},42369:(D,A,e)=>{e.d(A,{ww:()=>c,P_:()=>T,xC:()=>d,OS:()=>r,FN:()=>E,Xq:()=>O});var h=e(95170);class l extends Error{constructor(P){super(P),Object.setPrototypeOf(this,new.target.prototype)}}class c extends Error{constructor(P){super(P),Object.setPrototypeOf(this,new.target.prototype)}}class f extends c{constructor(P){super(P),Object.setPrototypeOf(this,new.target.prototype)}}class g extends c{constructor(P){super(P),Object.setPrototypeOf(this,new.target.prototype)}}function T(a,P,t,u){return new a(P,t,u)}function n(a){if(0===a.length)throw new f("Cannot extract from an empty payload.");const P=a.split(".");if(3!==P.length)throw new g(`The payload ${a} is not valid JWT payload and must consist of three parts.`);let t;try{t=(0,h.XE)(P[1])}catch(u){throw new g(`The payload ${a} is not valid JWT payload and cannot be parsed.`)}if(!t)throw new g(`The payload ${a} is not valid JWT payload and cannot be decoded.`);return JSON.parse(t)}let d=(()=>{class a extends class{constructor(){this.payload=null}getName(){return this.constructor.NAME}getPayload(){return this.payload}}{constructor(t,u,o){super(),this.token=t,this.ownerStrategyName=u,this.createdAt=o;try{this.parsePayload()}catch(s){if(!(s instanceof l))throw s}this.createdAt=this.prepareCreatedAt(o)}parsePayload(){this.payload=null}prepareCreatedAt(t){return t||new Date}getCreatedAt(){return this.createdAt}getValue(){return this.token}getOwnerStrategyName(){return this.ownerStrategyName}isValid(){return!!this.getValue()}toString(){return this.token?this.token:""}}return a.NAME="nb:auth:simple:token",a})(),r=(()=>{class a extends d{prepareCreatedAt(t){const u=this.getPayload();return u&&u.iat?new Date(1e3*Number(u.iat)):super.prepareCreatedAt(t)}parsePayload(){if(!this.token)throw new l("Token not found. ");this.payload=n(this.token)}getTokenExpDate(){const t=this.getPayload();if(t&&!t.hasOwnProperty("exp"))return null;const u=new Date(0);return u.setUTCSeconds(t.exp),u}isValid(){return super.isValid()&&(!this.getTokenExpDate()||new Date<this.getTokenExpDate())}}return a.NAME="nb:auth:jwt:token",a})(),E=(()=>{class a extends d{constructor(t={},u,o){super((a=>{if("string"==typeof a)try{return JSON.parse(a)}catch(P){}return a})(t),u,o)}getValue(){return this.token.access_token}getRefreshToken(){return this.token.refresh_token}setRefreshToken(t){this.token.refresh_token=t}parsePayload(){if(!this.token)throw new l("Token not found.");if(!Object.keys(this.token).length)throw new f("Cannot extract payload from an empty token.");this.payload=this.token}getType(){return this.token.token_type}isValid(){return super.isValid()&&(!this.getTokenExpDate()||new Date<this.getTokenExpDate())}getTokenExpDate(){return this.token.hasOwnProperty("expires_in")?new Date(this.createdAt.getTime()+1e3*Number(this.token.expires_in)):null}toString(){return JSON.stringify(this.token)}}return a.NAME="nb:auth:oauth2:token",a})(),O=(()=>{class a extends E{parsePayload(){super.parsePayload(),this.parseAccessTokenPayload()}parseAccessTokenPayload(){const t=this.getValue();if(!t)throw new l("access_token key not found.");this.accessTokenPayload=n(t)}getAccessTokenPayload(){return this.accessTokenPayload}prepareCreatedAt(t){const u=this.accessTokenPayload;return u&&u.iat?new Date(1e3*Number(u.iat)):super.prepareCreatedAt(t)}isValid(){return this.accessTokenPayload&&super.isValid()}getTokenExpDate(){if(this.accessTokenPayload&&this.accessTokenPayload.hasOwnProperty("exp")){const t=new Date(0);return t.setUTCSeconds(this.accessTokenPayload.exp),t}return super.getTokenExpDate()}}return a.NAME="nb:auth:oauth2:jwt:token",a})()},72337:(D,A,e)=>{e.d(A,{Y:()=>h});class h{}},8177:(D,A,e)=>{e.d(A,{D:()=>c});var h=e(44522),p=e(95170),l=e(42369);class c{setOptions(g){this.options=(0,p.ZB)({},this.defaultOptions,g)}getOption(g){return(0,p.hB)(this.options,g,null)}createToken(g,T){const n=(0,l.P_)(this.getOption("token.class"),g,this.getName());if(T&&!n.isValid())throw new l.ww("Token is empty or invalid.");return n}getName(){return this.getOption("name")}createFailResponse(g){return new h.Zn({body:{},status:401})}createSuccessResponse(g){return new h.Zn({body:{},status:200})}getActionEndpoint(g){const T=this.getOption(`${g}.endpoint`),n=this.getOption("baseEndpoint");return T?n+T:""}}},11004:(D,A,e)=>{e.d(A,{r:()=>r});var h=e(22411),p=e(5250),l=e(8177),c=e(86334),f=e(72337),g=e(42369);const n=new class extends f.Y{constructor(){super(...arguments),this.token={class:g.xC},this.delay=1e3,this.alwaysFail=!1}};var d=e(83668);let r=(()=>{class i extends l.D{constructor(){super(...arguments),this.defaultOptions=n}static setup(O){return[i,O]}authenticate(O){return(0,h.of)(this.createDummyResult(O)).pipe((0,p.g)(this.getOption("delay")))}register(O){return(0,h.of)(this.createDummyResult(O)).pipe((0,p.g)(this.getOption("delay")))}requestPassword(O){return(0,h.of)(this.createDummyResult(O)).pipe((0,p.g)(this.getOption("delay")))}resetPassword(O){return(0,h.of)(this.createDummyResult(O)).pipe((0,p.g)(this.getOption("delay")))}logout(O){return(0,h.of)(this.createDummyResult(O)).pipe((0,p.g)(this.getOption("delay")))}refreshToken(O){return(0,h.of)(this.createDummyResult(O)).pipe((0,p.g)(this.getOption("delay")))}createDummyResult(O){if(this.getOption("alwaysFail"))return new c.g(!1,this.createFailResponse(O),null,["Something went wrong."]);try{const a=this.createToken("test token",!0);return new c.g(!0,this.createSuccessResponse(O),"/",[],["Successfully logged in."],a)}catch(a){return new c.g(!1,this.createFailResponse(O),null,[a.message])}}}return i.\u0275fac=function(){let E;return function(a){return(E||(E=d.n5z(i)))(a||i)}}(),i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac}),i})()},3203:(D,A,e)=>{e.d(A,{aW:()=>l,sY:()=>c,rW:()=>f,N2:()=>T});var h=e(42369),p=e(72337),l=(()=>{return(n=l||(l={})).CODE="code",n.TOKEN="token",l;var n})(),c=(()=>{return(n=c||(c={})).AUTHORIZATION_CODE="authorization_code",n.PASSWORD="password",n.REFRESH_TOKEN="refresh_token",c;var n})(),f=(()=>{return(n=f||(f={})).NONE="none",n.BASIC="basic",n.REQUEST_BODY="request-body",f;var n})();const T=new class extends p.Y{constructor(){super(...arguments),this.baseEndpoint="",this.clientId="",this.clientSecret="",this.clientAuthMethod=f.NONE,this.redirect={success:"/",failure:null},this.defaultErrors=["Something went wrong, please try again."],this.defaultMessages=["You have been successfully authenticated."],this.authorize={endpoint:"authorize",responseType:l.CODE,requireValidToken:!0},this.token={endpoint:"token",grantType:c.AUTHORIZATION_CODE,requireValidToken:!0,class:h.FN},this.refresh={endpoint:"token",grantType:c.REFRESH_TOKEN,requireValidToken:!0}}}},97406:(D,A,e)=>{e.d(A,{F:()=>O});var h=e(44522),p=e(22411),l=e(79204),c=e(38053),f=e(52047),g=e(93049),T=e(8177),n=e(42369),d=e(86334),r=e(3203),i=e(83668),E=e(24301);let O=(()=>{class a extends T.D{constructor(t,u,o){super(),this.http=t,this.route=u,this.window=o,this.redirectResultHandlers={[r.aW.CODE]:()=>(0,p.of)(this.route.snapshot.queryParams).pipe((0,l.w)(s=>s.code?this.requestToken(s.code):(0,p.of)(new d.g(!1,s,this.getOption("redirect.failure"),this.getOption("defaultErrors"),[])))),[r.aW.TOKEN]:()=>{const y=this.getOption("authorize.requireValidToken");return(0,p.of)(this.route.snapshot.fragment).pipe((0,c.U)(_=>this.parseHashAsQueryParams(_)),(0,c.U)(_=>_.error?new d.g(!1,_,this.getOption("redirect.failure"),this.getOption("defaultErrors"),[]):new d.g(!0,_,this.getOption("redirect.success"),[],this.getOption("defaultMessages"),this.createToken(_,y))),(0,f.K)(_=>{const k=[];return k.push(_ instanceof n.ww?_.message:"Something went wrong."),(0,p.of)(new d.g(!1,_,this.getOption("redirect.failure"),k))}))}},this.redirectResults={[r.aW.CODE]:()=>(0,p.of)(this.route.snapshot.queryParams).pipe((0,c.U)(s=>!(!s||!s.code&&!s.error))),[r.aW.TOKEN]:()=>(0,p.of)(this.route.snapshot.fragment).pipe((0,c.U)(s=>this.parseHashAsQueryParams(s)),(0,c.U)(s=>!(!s||!s.access_token&&!s.error)))},this.defaultOptions=r.N2}static setup(t){return[a,t]}get responseType(){return this.getOption("authorize.responseType")}get clientAuthMethod(){return this.getOption("clientAuthMethod")}authenticate(t){return this.getOption("token.grantType")===r.sY.PASSWORD?this.passwordToken(t.email,t.password):this.isRedirectResult().pipe((0,l.w)(u=>u?this.getAuthorizationResult():(this.authorizeRedirect(),(0,p.of)(new d.g(!0)))))}getAuthorizationResult(){const t=this.redirectResultHandlers[this.responseType];if(t)return t.call(this);throw new Error(`'${this.responseType}' responseType is not supported,\n                      only 'token' and 'code' are supported now`)}refreshToken(t){const u="refresh",o=this.getActionEndpoint(u),s=this.getOption(`${u}.requireValidToken`);let y=this.buildAuthHeader()||new h.WM;return y=y.append("Content-Type","application/x-www-form-urlencoded"),this.http.post(o,this.buildRefreshRequestData(t),{headers:y}).pipe((0,c.U)(_=>new d.g(!0,_,this.getOption("redirect.success"),[],this.getOption("defaultMessages"),this.createRefreshedToken(_,t,s))),(0,f.K)(_=>this.handleResponseError(_)))}passwordToken(t,u){const o="token",s=this.getActionEndpoint(o),y=this.getOption(`${o}.requireValidToken`);let _=this.buildAuthHeader()||new h.WM;return _=_.append("Content-Type","application/x-www-form-urlencoded"),this.http.post(s,this.buildPasswordRequestData(t,u),{headers:_}).pipe((0,c.U)(k=>new d.g(!0,k,this.getOption("redirect.success"),[],this.getOption("defaultMessages"),this.createToken(k,y))),(0,f.K)(k=>this.handleResponseError(k)))}authorizeRedirect(){this.window.location.href=this.buildRedirectUrl()}isRedirectResult(){return this.redirectResults[this.responseType].call(this)}requestToken(t){const u="token",o=this.getActionEndpoint(u),s=this.getOption(`${u}.requireValidToken`);let y=this.buildAuthHeader()||new h.WM;return y=y.append("Content-Type","application/x-www-form-urlencoded"),this.http.post(o,this.buildCodeRequestData(t),{headers:y}).pipe((0,c.U)(_=>new d.g(!0,_,this.getOption("redirect.success"),[],this.getOption("defaultMessages"),this.createToken(_,s))),(0,f.K)(_=>this.handleResponseError(_)))}buildCodeRequestData(t){const u={grant_type:this.getOption("token.grantType"),code:t,redirect_uri:this.getOption("token.redirectUri"),client_id:this.getOption("clientId")};return this.urlEncodeParameters(this.cleanParams(this.addCredentialsToParams(u)))}buildRefreshRequestData(t){const u={grant_type:this.getOption("refresh.grantType"),refresh_token:t.getRefreshToken(),scope:this.getOption("refresh.scope"),client_id:this.getOption("clientId")};return this.urlEncodeParameters(this.cleanParams(this.addCredentialsToParams(u)))}buildPasswordRequestData(t,u){const o={grant_type:this.getOption("token.grantType"),username:t,password:u,scope:this.getOption("token.scope")};return this.urlEncodeParameters(this.cleanParams(this.addCredentialsToParams(o)))}buildAuthHeader(){if(this.clientAuthMethod===r.rW.BASIC){if(this.getOption("clientId")&&this.getOption("clientSecret"))return new h.WM({Authorization:"Basic "+btoa(this.getOption("clientId")+":"+this.getOption("clientSecret"))});throw Error("For basic client authentication method, please provide both clientId & clientSecret.")}}cleanParams(t){return Object.entries(t).forEach(([u,o])=>!o&&delete t[u]),t}addCredentialsToParams(t){if(this.clientAuthMethod===r.rW.REQUEST_BODY){if(this.getOption("clientId")&&this.getOption("clientSecret"))return Object.assign(Object.assign({},t),{client_id:this.getOption("clientId"),client_secret:this.getOption("clientSecret")});throw Error("For request body client authentication method, please provide both clientId & clientSecret.")}return t}handleResponseError(t){let u=[];return t instanceof h.UA?t.error.error_description?u.push(t.error.error_description):u=this.getOption("defaultErrors"):u.push(t instanceof n.ww?t.message:"Something went wrong."),(0,p.of)(new d.g(!1,t,this.getOption("redirect.failure"),u,[]))}buildRedirectUrl(){const t=Object.assign({response_type:this.getOption("authorize.responseType"),client_id:this.getOption("clientId"),redirect_uri:this.getOption("authorize.redirectUri"),scope:this.getOption("authorize.scope"),state:this.getOption("authorize.state")},this.getOption("authorize.params"));return`${this.getActionEndpoint("authorize")}?${this.urlEncodeParameters(this.cleanParams(t))}`}parseHashAsQueryParams(t){return t?t.split("&").reduce((u,o)=>{const s=o.split("=");return u[s[0]]=decodeURIComponent(s[1]),u},{}):{}}urlEncodeParameters(t){return Object.keys(t).map(u=>`${encodeURIComponent(u)}=${encodeURIComponent(t[u])}`).join("&")}createRefreshedToken(t,u,o){const s=this.createToken(t,o);return!s.getRefreshToken()&&u.getRefreshToken()&&s.setRefreshToken(u.getRefreshToken()),s}register(t){throw new Error("`register` is not supported by `NbOAuth2AuthStrategy`, use `authenticate`.")}requestPassword(t){throw new Error("`requestPassword` is not supported by `NbOAuth2AuthStrategy`, use `authenticate`.")}resetPassword(t={}){throw new Error("`resetPassword` is not supported by `NbOAuth2AuthStrategy`, use `authenticate`.")}logout(){return(0,p.of)(new d.g(!0))}}return a.\u0275fac=function(t){return new(t||a)(i.LFG(h.eN),i.LFG(E.gz),i.LFG(g.Q3))},a.\u0275prov=i.Yz7({token:a,factory:a.\u0275fac}),a})()},27431:(D,A,e)=>{e.d(A,{O:()=>P});var h=e(44522),p=e(22411),l=e(38053),c=e(52047),f=e(79204),g=e(86334),T=e(8177),n=e(42369),d=e(72337),r=e(95170);const E=new class extends d.Y{constructor(){super(...arguments),this.baseEndpoint="/api/auth/",this.login={alwaysFail:!1,endpoint:"login",method:"post",requireValidToken:!0,redirect:{success:"/",failure:null},defaultErrors:["Login/Email combination is not correct, please try again."],defaultMessages:["You have been successfully logged in."]},this.register={alwaysFail:!1,endpoint:"register",method:"post",requireValidToken:!0,redirect:{success:"/",failure:null},defaultErrors:["Something went wrong, please try again."],defaultMessages:["You have been successfully registered."]},this.requestPass={endpoint:"request-pass",method:"post",redirect:{success:"/",failure:null},defaultErrors:["Something went wrong, please try again."],defaultMessages:["Reset password instructions have been sent to your email."]},this.resetPass={endpoint:"reset-pass",method:"put",redirect:{success:"/",failure:null},resetPasswordTokenKey:"reset_password_token",defaultErrors:["Something went wrong, please try again."],defaultMessages:["Your password has been successfully changed."]},this.logout={alwaysFail:!1,endpoint:"logout",method:"delete",redirect:{success:"/",failure:null},defaultErrors:["Something went wrong, please try again."],defaultMessages:["You have been successfully logged out."]},this.refreshToken={endpoint:"refresh-token",method:"post",requireValidToken:!0,redirect:{success:null,failure:null},defaultErrors:["Something went wrong, please try again."],defaultMessages:["Your token has been successfully refreshed."]},this.token={class:n.xC,key:"data.token",getter:(u,o,s)=>(0,r.hB)(o.body,s.token.key)},this.errors={key:"data.errors",getter:(u,o,s)=>(0,r.hB)(o.error,s.errors.key,s[u].defaultErrors)},this.messages={key:"data.messages",getter:(u,o,s)=>(0,r.hB)(o.body,s.messages.key,s[u].defaultMessages)}}};var O=e(83668),a=e(24301);let P=(()=>{class t extends T.D{constructor(o,s){super(),this.http=o,this.route=s,this.defaultOptions=E}static setup(o){return[t,o]}authenticate(o){const s="login",y=this.getOption(`${s}.method`),_=this.getActionEndpoint(s),k=this.getOption(`${s}.requireValidToken`);return this.http.request(y,_,{body:o,observe:"response"}).pipe((0,l.U)(m=>{if(this.getOption(`${s}.alwaysFail`))throw this.createFailResponse(o);return m}),(0,l.U)(m=>new g.g(!0,m,this.getOption(`${s}.redirect.success`),[],this.getOption("messages.getter")(s,m,this.options),this.createToken(this.getOption("token.getter")(s,m,this.options),k))),(0,c.K)(m=>this.handleResponseError(m,s)))}register(o){const s="register",y=this.getOption(`${s}.method`),_=this.getActionEndpoint(s),k=this.getOption(`${s}.requireValidToken`);return this.http.request(y,_,{body:o,observe:"response"}).pipe((0,l.U)(m=>{if(this.getOption(`${s}.alwaysFail`))throw this.createFailResponse(o);return m}),(0,l.U)(m=>new g.g(!0,m,this.getOption(`${s}.redirect.success`),[],this.getOption("messages.getter")(s,m,this.options),this.createToken(this.getOption("token.getter")("login",m,this.options),k))),(0,c.K)(m=>this.handleResponseError(m,s)))}requestPassword(o){const s="requestPass",y=this.getOption(`${s}.method`),_=this.getActionEndpoint(s);return this.http.request(y,_,{body:o,observe:"response"}).pipe((0,l.U)(k=>{if(this.getOption(`${s}.alwaysFail`))throw this.createFailResponse();return k}),(0,l.U)(k=>new g.g(!0,k,this.getOption(`${s}.redirect.success`),[],this.getOption("messages.getter")(s,k,this.options))),(0,c.K)(k=>this.handleResponseError(k,s)))}resetPassword(o={}){const s="resetPass",y=this.getOption(`${s}.method`),_=this.getActionEndpoint(s),k=this.getOption(`${s}.resetPasswordTokenKey`);return o[k]=this.route.snapshot.queryParams[k],this.http.request(y,_,{body:o,observe:"response"}).pipe((0,l.U)(m=>{if(this.getOption(`${s}.alwaysFail`))throw this.createFailResponse();return m}),(0,l.U)(m=>new g.g(!0,m,this.getOption(`${s}.redirect.success`),[],this.getOption("messages.getter")(s,m,this.options))),(0,c.K)(m=>this.handleResponseError(m,s)))}logout(){const o="logout",s=this.getOption(`${o}.method`),y=this.getActionEndpoint(o);return(0,p.of)({}).pipe((0,f.w)(_=>y?this.http.request(s,y,{observe:"response"}):(0,p.of)(_)),(0,l.U)(_=>{if(this.getOption(`${o}.alwaysFail`))throw this.createFailResponse();return _}),(0,l.U)(_=>new g.g(!0,_,this.getOption(`${o}.redirect.success`),[],this.getOption("messages.getter")(o,_,this.options))),(0,c.K)(_=>this.handleResponseError(_,o)))}refreshToken(o){const s="refreshToken",y=this.getOption(`${s}.method`),_=this.getActionEndpoint(s),k=this.getOption(`${s}.requireValidToken`);return this.http.request(y,_,{body:o,observe:"response"}).pipe((0,l.U)(m=>{if(this.getOption(`${s}.alwaysFail`))throw this.createFailResponse(o);return m}),(0,l.U)(m=>new g.g(!0,m,this.getOption(`${s}.redirect.success`),[],this.getOption("messages.getter")(s,m,this.options),this.createToken(this.getOption("token.getter")(s,m,this.options),k))),(0,c.K)(m=>this.handleResponseError(m,s)))}handleResponseError(o,s){let y=[];return o instanceof h.UA?y=this.getOption("errors.getter")(s,o,this.options):y.push(o instanceof n.ww?o.message:"Something went wrong."),(0,p.of)(new g.g(!1,o,this.getOption(`${s}.redirect.failure`),y))}}return t.\u0275fac=function(o){return new(o||t)(O.LFG(h.eN),O.LFG(a.gz))},t.\u0275prov=O.Yz7({token:t,factory:t.\u0275fac}),t})()},49761:(D,A,e)=>{e.d(A,{P:()=>l});var h=e(35861),p=e(83668);let l=(()=>{class c{}return c.\u0275fac=function(g){return new(g||c)},c.\u0275mod=p.oAB({type:c}),c.\u0275inj=p.cJS({imports:[[h.P]]}),c})()}}]);