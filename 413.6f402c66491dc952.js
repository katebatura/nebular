"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[413],{40413:(E,f,o)=>{o.r(f),o.d(f,{AzurePlaygroundModule:()=>P});var d=o(86019),C=o(49133),T=o(44522),k=o(85082),Z=o(6512),S=o(3582),i=o(22411),x=o(79204),a=o(38053),B=o(52047),A=o(42369),O=o(97406),m=o(3203),c=o(86334),t=o(83668);let U=(()=>{class e extends A.Xq{getValue(){return this.token.id_token}}return e.NAME="nb:auth:azure:token",e})(),y=(()=>{class e extends O.F{constructor(){super(...arguments),this.redirectResultHandlers={[m.aW.CODE]:()=>(0,i.of)(this.route.snapshot.queryParams).pipe((0,x.w)(n=>n.code?this.requestToken(n.code):(0,i.of)(new c.g(!1,n,this.getOption("redirect.failure"),this.getOption("defaultErrors"),[])))),id_token:()=>{const r=this.getOption("authorize.requireValidToken");return(0,i.of)(this.route.snapshot.fragment).pipe((0,a.U)(s=>this.parseHashAsQueryParams(s)),(0,a.U)(s=>s.error?new c.g(!1,s,this.getOption("redirect.failure"),this.getOption("defaultErrors"),[]):new c.g(!0,s,this.getOption("redirect.success"),[],this.getOption("defaultMessages"),this.createToken(s,r))),(0,B.K)(s=>{const p=[];return p.push(s instanceof A.ww?s.message:"Something went wrong."),(0,i.of)(new c.g(!1,s,this.getOption("redirect.failure"),p))}))}},this.redirectResults={[m.aW.CODE]:()=>(0,i.of)(null),id_token:()=>(0,i.of)(this.route.snapshot.fragment).pipe((0,a.U)(n=>this.parseHashAsQueryParams(n)),(0,a.U)(n=>!(!n||!n.id_token&&!n.error)))}}static setup(n){return[e,n]}}return e.\u0275fac=function(){let u;return function(r){return(u||(u=t.n5z(e)))(r||e)}}(),e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})();var g=o(24301),l=o(28805),z=o(23405),v=o(83785),h=o(90761);let M=(()=>{class e{constructor(n,r){this.authService=n,this.router=r,this.destroy$=new z.xQ,this.authService.authenticate("azure").pipe((0,l.R)(this.destroy$)).subscribe(s=>{s.isSuccess()&&s.getRedirect()&&this.router.navigateByUrl(s.getRedirect())})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(v._),t.Y36(g.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["nb-playground-azure-callback"]],decls:3,vars:0,template:function(n,r){1&n&&(t.TgZ(0,"nb-layout"),t.TgZ(1,"nb-layout-column"),t._uU(2,"Authenticating..."),t.qZA(),t.qZA())},directives:[h.Aq,h.dP],encapsulation:2}),e})();var b=o(60634);function R(e,u){if(1&e){const n=t.EpF();t.TgZ(0,"button",2),t.NdJ("click",function(){return t.CHM(n),t.oxw().login()}),t._uU(1,"Sign In with Azure"),t.qZA()}}function F(e,u){if(1&e){const n=t.EpF();t.TgZ(0,"button",3),t.NdJ("click",function(){return t.CHM(n),t.oxw().logout()}),t._uU(1,"Sign Out"),t.qZA()}}const $=[{path:"",component:(()=>{class e{constructor(n){this.authService=n,this.destroy$=new z.xQ,this.authService.onTokenChange().pipe((0,l.R)(this.destroy$)).subscribe(r=>{this.token=null,r&&r.isValid()&&(this.token=r)})}login(){this.authService.authenticate("azure").pipe((0,l.R)(this.destroy$)).subscribe(n=>{})}logout(){this.authService.logout("azure").pipe((0,l.R)(this.destroy$)).subscribe(n=>{})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(v._))},e.\u0275cmp=t.Xpm({type:e,selectors:[["nb-playground-azure"]],decls:11,vars:6,consts:[["nbButton","","status","success",3,"click",4,"ngIf"],["nbButton","","status","warning",3,"click",4,"ngIf"],["nbButton","","status","success",3,"click"],["nbButton","","status","warning",3,"click"]],template:function(n,r){1&n&&(t.TgZ(0,"nb-layout"),t.TgZ(1,"nb-layout-column"),t.TgZ(2,"nb-card"),t.TgZ(3,"nb-card-body"),t.TgZ(4,"p"),t._uU(5),t.qZA(),t.TgZ(6,"p"),t._uU(7),t.ALo(8,"json"),t.qZA(),t.YNc(9,R,2,0,"button",0),t.YNc(10,F,2,0,"button",1),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.xp6(5),t.hij("Current User Authenticated: ",!!r.token,""),t.xp6(2),t.hij("Current User Token: ",t.lcZ(8,4,r.token),""),t.xp6(2),t.Q6J("ngIf",!r.token),t.xp6(1),t.Q6J("ngIf",r.token))},directives:[h.Aq,h.dP,b.As,b.yK,d.O5],pipes:[d.Ts],encapsulation:2}),e})()},{path:"callback",component:M}];let L=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[g.Bz.forChild($)],g.Bz]}),e})(),P=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[y],imports:[[d.ez,C.u5,T.JF,S.S.forRoot({strategies:[y.setup({name:"azure",clientId:"bde728e2-2809-4ff1-bc9c-7fcb23800ebe",clientSecret:"",authorize:{endpoint:"https://login.microsoftonline.com/01513fd2-16a0-453b-9fa0-c9089bfa023e/oauth2/authorize",responseType:"id_token",scope:"openid",redirectUri:"https://akveo.github.io/nebular/example/azure/callback",params:{p:"b2c_1_nebular"}},token:{class:U},redirect:{success:"/example/azure"}})]}),k.z,Z.B,L]]}),e})()}}]);